# 衣物保存错误修复 - 最终共识

## 明确需求描述
修复"添加衣物失败"错误，错误代码`ADD_CLOTHING_ITEM_ERROR`，具体原因为数据库表`clothing_items`缺少`parent_id`字段

## 技术实现方案

### 修复步骤
1. **数据库层面**: 使用ALTER TABLE添加parent_id字段
2. **模型层面**: 更新ClothingItem模型定义
3. **服务层面**: 更新ClothingService支持parentId参数
4. **关联关系**: 建立父子衣物关联

### 技术约束
- 使用现有Sequelize ORM
- 保持现有API接口不变
- 确保向后兼容性
- 遵循项目现有代码规范

### 验收标准
- [ ] 衣物保存功能恢复正常
- [ ] 支持可选parentId参数
- [ ] 现有数据不受影响
- [ ] 所有测试通过

## 任务边界限制
- **包含**: 数据库schema修复、模型定义更新、服务层更新
- **不包含**: 前端UI修改、业务逻辑变更、新功能开发
- **限制**: 不能破坏现有功能，不能影响现有数据

## 关键假设确认
- `parent_id`用于支持衣物组合搭配功能
- 字段为可选，允许NULL值
- 建立自引用外键关系