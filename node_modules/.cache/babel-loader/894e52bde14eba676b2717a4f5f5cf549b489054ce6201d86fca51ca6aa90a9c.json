{"ast":null,"code":"function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, withModifiers as _withModifiers, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, renderList as _renderList, vModelCheckbox as _vModelCheckbox, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"bg-white rounded-2xl shadow-medium p-6 md:p-8 max-w-4xl mx-auto\"\n};\nvar _hoisted_2 = {\n  \"class\": \"mb-10\"\n};\nvar _hoisted_3 = {\n  key: 0,\n  \"class\": \"relative h-64 flex items-center justify-center bg-neutral-100\"\n};\nvar _hoisted_4 = [\"src\"];\nvar _hoisted_5 = {\n  \"class\": \"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center\"\n};\nvar _hoisted_6 = {\n  \"class\": \"text-center p-4 bg-white/90 backdrop-blur rounded-lg shadow-lg\"\n};\nvar _hoisted_7 = {\n  \"class\": \"p-8 text-center\"\n};\nvar _hoisted_8 = {\n  \"class\": \"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center mb-4\"\n};\nvar _hoisted_9 = {\n  \"class\": \"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10\"\n};\nvar _hoisted_10 = {\n  \"class\": \"md:col-span-2\"\n};\nvar _hoisted_11 = {\n  \"class\": \"grid grid-cols-2 md:grid-cols-4 gap-3\"\n};\nvar _hoisted_12 = [\"value\"];\nvar _hoisted_13 = {\n  \"class\": \"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center mb-2 group-hover:bg-primary/20 transition-colors\"\n};\nvar _hoisted_14 = {\n  \"class\": \"text-sm font-medium\"\n};\nvar _hoisted_15 = {\n  \"class\": \"mb-10 md:col-span-2\"\n};\nvar _hoisted_16 = {\n  \"class\": \"flex justify-end space-x-4 pt-4 border-t border-neutral-100\"\n};\nvar _hoisted_17 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[23] || (_cache[23] = _createElementVNode(\"div\", {\n    \"class\": \"mb-8 text-center\"\n  }, [_createElementVNode(\"h3\", {\n    \"class\": \"text-2xl font-bold mb-2 text-neutral-800\"\n  }, \"添加新衣物\"), _createElementVNode(\"p\", {\n    \"class\": \"text-neutral-500 max-w-md mx-auto\"\n  }, \"上传衣物照片并填写详细信息，帮助系统更好地为你推荐搭配\")], -1 /* CACHED */)), _createCommentVNode(\" 图片上传区域 \"), _createElementVNode(\"div\", _hoisted_2, [_cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n    \"class\": \"flex items-center justify-between mb-3\"\n  }, [_createElementVNode(\"label\", {\n    \"class\": \"block text-sm font-medium text-neutral-700\"\n  }, [_createTextVNode(\"衣物照片 \"), _createElementVNode(\"span\", {\n    \"class\": \"text-red-500\"\n  }, \"*\")]), _createElementVNode(\"span\", {\n    \"class\": \"text-xs text-neutral-500\"\n  }, \"支持 JPG、PNG 格式，最大 5MB\")], -1 /* CACHED */)), _createCommentVNode(\" 上传/预览区域 \"), _createElementVNode(\"div\", {\n    \"class\": _normalizeClass([\"border-2 rounded-xl overflow-hidden transition-colors cursor-pointer bg-neutral-50 relative\", {\n      'border-solid border-neutral-300': $setup.hasImage && !$setup.isDragging,\n      'border-dashed border-neutral-200 hover:border-primary': !$setup.hasImage && !$setup.isDragging,\n      'border-primary bg-primary/5': $setup.isDragging\n    }]),\n    onClick: $setup.triggerFileInput,\n    onDragover: _withModifiers($setup.handleDragOver, [\"prevent\"]),\n    onDragleave: _withModifiers($setup.handleDragLeave, [\"prevent\"]),\n    onDrop: _withModifiers($setup.handleDrop, [\"prevent\"])\n  }, [_createCommentVNode(\" 图片预览 \"), $setup.hasImage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: $setup.clothingItem.image,\n    alt: \"衣物预览\",\n    \"class\": \"max-h-full max-w-full object-contain\"\n  }, null, 8 /* PROPS */, _hoisted_4), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'cloud-upload-alt'],\n    \"class\": \"text-primary text-2xl mb-2\"\n  }), _cache[7] || (_cache[7] = _createElementVNode(\"p\", {\n    \"class\": \"font-medium text-neutral-700 mb-2\"\n  }, \"重新上传图片\", -1 /* CACHED */)), _cache[8] || (_cache[8] = _createElementVNode(\"p\", {\n    \"class\": \"text-sm text-neutral-500\"\n  }, \"点击或拖放新图片到此处\", -1 /* CACHED */))])])])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 上传区域 \"), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'cloud-upload'],\n    \"class\": \"text-primary text-2xl\"\n  })]), _cache[9] || (_cache[9] = _createElementVNode(\"h4\", {\n    \"class\": \"font-medium mb-1 text-neutral-700\"\n  }, \"点击上传或拖放图片\", -1 /* CACHED */)), _cache[10] || (_cache[10] = _createElementVNode(\"p\", {\n    \"class\": \"text-sm text-neutral-500 mb-4\"\n  }, \"建议尺寸 500×500\", -1 /* CACHED */)), _cache[11] || (_cache[11] = _createElementVNode(\"button\", {\n    \"class\": \"px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors\"\n  }, \" 选择文件 \", -1 /* CACHED */))])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _createCommentVNode(\" 隐藏的文件输入 \"), _createElementVNode(\"input\", {\n    type: \"file\",\n    ref: \"fileInput\",\n    \"class\": \"hidden\",\n    accept: \"image/jpeg,image/jpg,image/png\",\n    onChange: $setup.handleFileChange\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)], 34 /* CLASS, NEED_HYDRATION */)]), _createCommentVNode(\" 表单字段 \"), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", null, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    \"class\": \"block text-sm font-medium text-neutral-700 mb-2\"\n  }, [_createTextVNode(\"衣物名称 \"), _createElementVNode(\"span\", {\n    \"class\": \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $setup.clothingItem.name = $event;\n    }),\n    placeholder: \"例如：黑色修身牛仔裤\",\n    \"class\": \"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.clothingItem.name]])]), _createElementVNode(\"div\", null, [_cache[15] || (_cache[15] = _createElementVNode(\"label\", {\n    \"class\": \"block text-sm font-medium text-neutral-700 mb-2\"\n  }, [_createTextVNode(\"衣物类别 \"), _createElementVNode(\"span\", {\n    \"class\": \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $setup.clothingItem.categoryId = $event;\n    }),\n    \"class\": \"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all appearance-none bg-white\"\n  }, _toConsumableArray(_cache[14] || (_cache[14] = [_createStaticVNode(\"<option value=\\\"\\\">请选择类别</option><option value=\\\"1\\\">上装</option><option value=\\\"2\\\">下装</option><option value=\\\"3\\\">外套</option><option value=\\\"4\\\">鞋履</option><option value=\\\"5\\\">配饰</option><option value=\\\"6\\\">包包</option>\", 7)])), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.clothingItem.categoryId]])]), _createElementVNode(\"div\", null, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n    \"class\": \"block text-sm font-medium text-neutral-700 mb-2\"\n  }, \"风格\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $setup.clothingItem.style = $event;\n    }),\n    \"class\": \"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all appearance-none bg-white\"\n  }, _toConsumableArray(_cache[16] || (_cache[16] = [_createStaticVNode(\"<option value=\\\"\\\">请选择风格</option><option value=\\\"休闲\\\">休闲</option><option value=\\\"正式\\\">正式</option><option value=\\\"运动\\\">运动</option><option value=\\\"复古\\\">复古</option><option value=\\\"潮流\\\">潮流</option>\", 6)])), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.clothingItem.style]])]), _createElementVNode(\"div\", _hoisted_10, [_cache[18] || (_cache[18] = _createElementVNode(\"label\", {\n    \"class\": \"block text-sm font-medium text-neutral-700 mb-2\"\n  }, [_createTextVNode(\"适用季节 \"), _createElementVNode(\"span\", {\n    \"class\": \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_11, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList($setup.seasonOptions, function (seasonOption) {\n    return _createElementVNode(\"label\", {\n      key: seasonOption.value,\n      \"class\": _normalizeClass([\"flex flex-col items-center justify-center p-3 border border-neutral-200 rounded-lg hover:border-primary transition-colors cursor-pointer group\", {\n        'border-primary bg-primary/5': $setup.clothingItem.seasons.includes(seasonOption.value)\n      }])\n    }, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"checkbox\",\n      value: seasonOption.value,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = function ($event) {\n        return $setup.clothingItem.seasons = $event;\n      }),\n      \"class\": \"sr-only rounded text-primary focus:ring-primary\"\n    }, null, 8 /* PROPS */, _hoisted_12), [[_vModelCheckbox, $setup.clothingItem.seasons]]), _createElementVNode(\"div\", _hoisted_13, [_createVNode(_component_font_awesome_icon, {\n      icon: $setup.getSeasonIcon(seasonOption.value),\n      \"class\": \"text-primary\"\n    }, null, 8 /* PROPS */, [\"icon\"])]), _createElementVNode(\"span\", _hoisted_14, _toDisplayString(seasonOption.label), 1 /* TEXT */)], 2 /* CLASS */);\n  }), 64 /* STABLE_FRAGMENT */))])]), _createElementVNode(\"div\", null, [_cache[19] || (_cache[19] = _createElementVNode(\"label\", {\n    \"class\": \"block text-sm font-medium text-neutral-700 mb-2\"\n  }, \"颜色\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = function ($event) {\n      return $setup.clothingItem.color = $event;\n    }),\n    placeholder: \"例如：深蓝色\",\n    \"class\": \"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.clothingItem.color]])]), _createElementVNode(\"div\", null, [_cache[20] || (_cache[20] = _createElementVNode(\"label\", {\n    \"class\": \"block text-sm font-medium text-neutral-700 mb-2\"\n  }, \"品牌（可选）\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = function ($event) {\n      return $setup.clothingItem.brand = $event;\n    }),\n    placeholder: \"例如：优衣库\",\n    \"class\": \"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.clothingItem.brand]])])]), _createElementVNode(\"div\", _hoisted_15, [_cache[21] || (_cache[21] = _createElementVNode(\"label\", {\n    \"class\": \"block text-sm font-medium text-neutral-700 mb-2\"\n  }, \"备注（可选）\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = function ($event) {\n      return $setup.clothingItem.notes = $event;\n    }),\n    rows: \"3\",\n    placeholder: \"添加关于这件衣物的更多信息...\",\n    \"class\": \"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all resize-none\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.clothingItem.notes]])]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"button\", {\n    onClick: $setup.handleCancel,\n    \"class\": \"px-6 py-3 border border-neutral-200 rounded-xl text-neutral-700 font-medium hover:bg-neutral-50 transition-colors min-w-[120px]\"\n  }, \" 取消 \"), _createElementVNode(\"button\", {\n    onClick: $setup.saveClothes,\n    disabled: $setup.isSaving,\n    \"class\": \"px-6 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors shadow-soft min-w-[120px] flex items-center justify-center disabled:opacity-70 disabled:cursor-not-allowed\"\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'save'],\n    \"class\": \"mr-2\"\n  }), _cache[22] || (_cache[22] = _createTextVNode(\" 保存衣物 \", -1 /* CACHED */))], 8 /* PROPS */, _hoisted_17)])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","_normalizeClass","$setup","hasImage","isDragging","onClick","triggerFileInput","onDragover","_withModifiers","handleDragOver","onDragleave","handleDragLeave","onDrop","handleDrop","_hoisted_3","src","clothingItem","image","alt","_hoisted_5","_hoisted_6","_createVNode","_component_font_awesome_icon","icon","_Fragment","key","_hoisted_7","_hoisted_8","type","ref","accept","onChange","handleFileChange","_hoisted_9","name","$event","placeholder","categoryId","style","_hoisted_10","_hoisted_11","_renderList","seasonOptions","seasonOption","value","seasons","includes","_hoisted_13","getSeasonIcon","_hoisted_14","_toDisplayString","label","color","brand","_hoisted_15","notes","rows","_hoisted_16","handleCancel","saveClothes","disabled","isSaving"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/components/form/UploadForm.vue"],"sourcesContent":["<template>\n  <div class=\"bg-white rounded-2xl shadow-medium p-6 md:p-8 max-w-4xl mx-auto\">\n    <div class=\"mb-8 text-center\">\n      <h3 class=\"text-2xl font-bold mb-2 text-neutral-800\">添加新衣物</h3>\n      <p class=\"text-neutral-500 max-w-md mx-auto\">上传衣物照片并填写详细信息，帮助系统更好地为你推荐搭配</p>\n    </div>\n    \n    <!-- 图片上传区域 -->\n    <div class=\"mb-10\">\n      <div class=\"flex items-center justify-between mb-3\">\n        <label class=\"block text-sm font-medium text-neutral-700\">衣物照片 <span class=\"text-red-500\">*</span></label>\n        <span class=\"text-xs text-neutral-500\">支持 JPG、PNG 格式，最大 5MB</span>\n      </div>\n      \n      <!-- 上传/预览区域 -->\n      <div \n        class=\"border-2 rounded-xl overflow-hidden transition-colors cursor-pointer bg-neutral-50 relative\"\n        :class=\"{\n          'border-solid border-neutral-300': hasImage && !isDragging,\n          'border-dashed border-neutral-200 hover:border-primary': !hasImage && !isDragging,\n          'border-primary bg-primary/5': isDragging\n        }\"\n        @click=\"triggerFileInput\"\n        @dragover.prevent=\"handleDragOver\"\n        @dragleave.prevent=\"handleDragLeave\"\n        @drop.prevent=\"handleDrop\"\n      >\n        <!-- 图片预览 -->\n        <div v-if=\"hasImage\" class=\"relative h-64 flex items-center justify-center bg-neutral-100\">\n          <img :src=\"clothingItem.image\" alt=\"衣物预览\" class=\"max-h-full max-w-full object-contain\">\n          <div class=\"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center\">\n            <div class=\"text-center p-4 bg-white/90 backdrop-blur rounded-lg shadow-lg\">\n              <font-awesome-icon :icon=\"['fas', 'cloud-upload-alt']\" class=\"text-primary text-2xl mb-2\" />\n              <p class=\"font-medium text-neutral-700 mb-2\">重新上传图片</p>\n              <p class=\"text-sm text-neutral-500\">点击或拖放新图片到此处</p>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 上传区域 -->\n        <div v-else class=\"p-8 text-center\">\n          <div class=\"w-16 h-16 mx-auto bg-primary/10 rounded-full flex items-center justify-center mb-4\">\n            <font-awesome-icon :icon=\"['fas', 'cloud-upload']\" class=\"text-primary text-2xl\" />\n          </div>\n          <h4 class=\"font-medium mb-1 text-neutral-700\">点击上传或拖放图片</h4>\n          <p class=\"text-sm text-neutral-500 mb-4\">建议尺寸 500×500</p>\n          <button class=\"px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors\">\n            选择文件\n          </button>\n        </div>\n        \n        <!-- 隐藏的文件输入 -->\n        <input \n          type=\"file\" \n          ref=\"fileInput\" \n          class=\"hidden\" \n          accept=\"image/jpeg,image/jpg,image/png\" \n          @change=\"handleFileChange\"\n        >\n      </div>\n    </div>\n    \n    <!-- 表单字段 -->\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10\">\n      <div>\n        <label class=\"block text-sm font-medium text-neutral-700 mb-2\">衣物名称 <span class=\"text-red-500\">*</span></label>\n        <input type=\"text\" v-model=\"clothingItem.name\" placeholder=\"例如：黑色修身牛仔裤\" class=\"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all\">\n      </div>\n      \n      <div>\n        <label class=\"block text-sm font-medium text-neutral-700 mb-2\">衣物类别 <span class=\"text-red-500\">*</span></label>\n        <select v-model=\"clothingItem.categoryId\" class=\"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all appearance-none bg-white\">\n          <option value=\"\">请选择类别</option>\n          <option value=\"1\">上装</option>\n          <option value=\"2\">下装</option>\n          <option value=\"3\">外套</option>\n          <option value=\"4\">鞋履</option>\n          <option value=\"5\">配饰</option>\n          <option value=\"6\">包包</option>\n        </select>\n      </div>\n      \n      <div>\n        <label class=\"block text-sm font-medium text-neutral-700 mb-2\">风格</label>\n        <select v-model=\"clothingItem.style\" class=\"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all appearance-none bg-white\">\n          <option value=\"\">请选择风格</option>\n          <option value=\"休闲\">休闲</option>\n          <option value=\"正式\">正式</option>\n          <option value=\"运动\">运动</option>\n          <option value=\"复古\">复古</option>\n          <option value=\"潮流\">潮流</option>\n        </select>\n      </div>\n      \n      <div class=\"md:col-span-2\">\n        <label class=\"block text-sm font-medium text-neutral-700 mb-2\">适用季节 <span class=\"text-red-500\">*</span></label>\n        <div class=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n          <label v-for=\"seasonOption in seasonOptions\" :key=\"seasonOption.value\" class=\"flex flex-col items-center justify-center p-3 border border-neutral-200 rounded-lg hover:border-primary transition-colors cursor-pointer group\" :class=\"{ 'border-primary bg-primary/5': clothingItem.seasons.includes(seasonOption.value) }\">\n            <input type=\"checkbox\" :value=\"seasonOption.value\" v-model=\"clothingItem.seasons\" class=\"sr-only rounded text-primary focus:ring-primary\">\n            <div class=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center mb-2 group-hover:bg-primary/20 transition-colors\">\n              <font-awesome-icon :icon=\"getSeasonIcon(seasonOption.value)\" class=\"text-primary\" />\n            </div>\n            <span class=\"text-sm font-medium\">{{ seasonOption.label }}</span>\n          </label>\n        </div>\n      </div>\n      \n      <div>\n        <label class=\"block text-sm font-medium text-neutral-700 mb-2\">颜色</label>\n        <input type=\"text\" v-model=\"clothingItem.color\" placeholder=\"例如：深蓝色\" class=\"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all\">\n      </div>\n      \n      <div>\n        <label class=\"block text-sm font-medium text-neutral-700 mb-2\">品牌（可选）</label>\n        <input type=\"text\" v-model=\"clothingItem.brand\" placeholder=\"例如：优衣库\" class=\"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all\">\n      </div>\n    </div>\n    \n    <div class=\"mb-10 md:col-span-2\">\n      <label class=\"block text-sm font-medium text-neutral-700 mb-2\">备注（可选）</label>\n      <textarea v-model=\"clothingItem.notes\" rows=\"3\" placeholder=\"添加关于这件衣物的更多信息...\" class=\"w-full px-4 py-3 rounded-xl border border-neutral-200 focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none transition-all resize-none\"></textarea>\n    </div>\n    \n    <div class=\"flex justify-end space-x-4 pt-4 border-t border-neutral-100\">\n      <button @click=\"handleCancel\" class=\"px-6 py-3 border border-neutral-200 rounded-xl text-neutral-700 font-medium hover:bg-neutral-50 transition-colors min-w-[120px]\">\n        取消\n      </button>\n      <button @click=\"saveClothes\" :disabled=\"isSaving\" class=\"px-6 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition-colors shadow-soft min-w-[120px] flex items-center justify-center disabled:opacity-70 disabled:cursor-not-allowed\">\n        <font-awesome-icon :icon=\"['fas', 'save']\" class=\"mr-2\" />\n        保存衣物\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref, computed, nextTick } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { useWardrobeStore } from \"../../stores/wardrobeStore\";\nimport { showToast } from '../../utils/toast';\n\nconst router = useRouter();\nconst wardrobeStore = useWardrobeStore();\n\n// 季节选项\nconst seasonOptions = [\n  { value: \"春季\", label: \"春季\" },\n  { value: \"夏季\", label: \"夏季\" },\n  { value: \"秋季\", label: \"秋季\" },\n  { value: \"冬季\", label: \"冬季\" }\n];\n\n// 表单数据\nconst clothingItem = reactive({\n  name: \"\",\n  categoryId: \"\",\n  style: \"\",\n  seasons: [], // 使用数组而不是字符串\n  color: \"\",\n  brand: \"\",\n  notes: \"\",\n  image: \"\" // 图片URL\n});\n\n// 判断是否有图片\nconst hasImage = computed(() => {\n  return clothingItem.image && clothingItem.image.trim() !== \"\";\n});\n\n// 文件输入引用\nconst fileInput = ref(null);\nconst isDragging = ref(false);\n\n// 保存状态\nconst isSaving = ref(false);\n\n// 触发文件选择\nconst triggerFileInput = () => {\n  fileInput.value.click();\n};\n\n// 处理文件选择\nconst handleFileChange = (event) => {\n  const file = event.target.files[0];\n  if (file) {\n    processImageFile(file);\n  }\n};\n\n// 处理拖拽悬停\nconst handleDragOver = () => {\n  isDragging.value = true;\n};\n\n// 处理拖拽离开\nconst handleDragLeave = () => {\n  isDragging.value = false;\n};\n\n// 处理文件拖放\nconst handleDrop = (event) => {\n  isDragging.value = false;\n  const file = event.dataTransfer.files[0];\n  if (file && file.type.startsWith('image/')) {\n    processImageFile(file);\n  } else {\n    showToast(\"请上传图片文件\", \"error\");\n  }\n};\n\n// 处理图片文件\nconst processImageFile = (file) => {\n  // 验证文件类型\n  if (!file.type.match('image.*')) {\n    showToast(\"请上传图片文件\", \"error\");\n    return;\n  }\n  \n  // 验证文件大小（限制为5MB）\n  if (file.size > 5 * 1024 * 1024) {\n    showToast(\"图片大小不能超过5MB\", \"error\");\n    return;\n  }\n  \n  // 创建图片URL\n  const reader = new FileReader();\n  reader.onload = (e) => {\n    // 在实际应用中，这里应该上传图片到服务器并获取URL\n    // 现在我们使用读取的URL作为图片URL\n    clothingItem.image = e.target.result;\n    showToast(\"图片上传成功\", \"success\");\n  };\n  reader.readAsDataURL(file);\n};\n\n// 获取季节图标\nconst getSeasonIcon = (season) => {\n  switch(season) {\n    case \"春季\":\n      return ['fas', 'seedling'];\n    case \"夏季\":\n      return ['fas', 'sun'];\n    case \"秋季\":\n      return ['fas', 'leaf'];\n    case \"冬季\":\n      return ['fas', 'snowflake'];\n    default:\n      return ['fas', 'calendar'];\n  }\n};\n\n// 取消按钮处理函数\nconst handleCancel = () => {\n  console.log(\"取消按钮被点击\");\n  // 使用window.location进行页面跳转\n  window.location.href = \"/\";\n  console.log(\"使用window.location跳转已执行\");\n};\n\nconst saveClothes = async () => {\n  // 防止重复提交\n  if (isSaving.value) {\n    return;\n  }\n  \n  isSaving.value = true;\n  // 验证必填字段\n  if (!clothingItem.name || !clothingItem.categoryId) {\n    showToast(\"请填写衣物名称和类别\", \"error\");\n    isSaving.value = false;\n    return;\n  }\n  \n  // 验证季节选择\n  if (!clothingItem.seasons || clothingItem.seasons.length === 0) {\n    showToast(\"请选择至少一个适用季节\", \"error\");\n    isSaving.value = false;\n    return;\n  }\n\n  try {\n    // 根据categoryId设置category名称\n    const categoryMap = {\n      \"1\": \"上装\",\n      \"2\": \"下装\",\n      \"3\": \"外套\",\n      \"4\": \"鞋履\",\n      \"5\": \"配饰\",\n      \"6\": \"包包\"\n    };\n    \n    // 创建要提交的数据对象，包含所有必要字段\n    const today = new Date().toISOString().split('T')[0];\n    const itemToSubmit = {\n      ...clothingItem,\n      category: categoryMap[clothingItem.categoryId] || \"其他\",\n      purchaseDate: today, // 设置购买日期为今天\n      createdAt: today, // 同时设置createdAt属性，确保能正确显示在最近添加列表中\n      favorite: false // 默认不收藏\n    };\n    \n    // 调用 store 方法保存衣物\n    await wardrobeStore.addClothingItem(itemToSubmit);\n    showToast(\"衣物添加成功\", \"success\");\n\n    // 使用nextTick确保DOM更新后再清空表单\n    await nextTick();\n    \n    // 清空表单\n    clothingItem.name = \"\";\n    clothingItem.categoryId = \"\";\n    clothingItem.style = \"\";\n    clothingItem.seasons = []; // 重置为空数组\n    clothingItem.color = \"\";\n    clothingItem.brand = \"\";\n    clothingItem.notes = \"\";\n    // 重置图片\n    clothingItem.image = \"\";\n\n    // 用户要求新增完不需要跳转到其他页面，保留在当前页面\n    \n    // 强制刷新页面中的衣橱数据，确保新添加的衣物能立即显示\n    // 由于我们已经修复了getCategoryItems函数，确保它能正确返回所有衣物，包括新添加的\n    // 这里不需要额外的刷新逻辑，因为Vue的响应式系统会自动更新视图\n  } catch (error) {\n    showToast(\"添加失败，请重试\", \"error\");\n    console.error(\"添加衣物失败:\", error);\n  } finally {\n    // 重置保存状态\n    isSaving.value = false;\n  }\n};\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}