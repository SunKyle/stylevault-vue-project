{"ast":null,"code":"import { ref, reactive, computed } from 'vue';\nimport { scenesMockData, seasonsMockData, stylesMockData } from '../../mock/data';\nimport InfoChip from './InfoChip.vue';\n\n// Props定义\n\nexport default {\n  __name: 'OutfitCard',\n  props: {\n    outfit: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: ['load-outfit', 'delete-outfit', 'edit-outfit'],\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose,\n      __emit = _ref.emit;\n    __expose();\n    var props = __props;\n\n    // 事件定义\n    var emit = __emit;\n\n    // 状态管理\n    var expanded = ref(false);\n\n    // 场景选项映射\n    var sceneOptions = scenesMockData;\n\n    // 季节选项映射\n    var seasonOptions = seasonsMockData;\n\n    // 风格选项映射\n    var styleOptions = stylesMockData;\n\n    // 通用工具函数 - 获取标签\n    var getLabel = function getLabel(options, value) {\n      var _options$find;\n      return ((_options$find = options.find(function (opt) {\n        return opt.value === value;\n      })) === null || _options$find === void 0 ? void 0 : _options$find.label) || value;\n    };\n    var getSceneLabel = function getSceneLabel(value) {\n      return getLabel(sceneOptions, value);\n    };\n    var getSeasonLabel = function getSeasonLabel(value) {\n      return getLabel(seasonOptions, value);\n    };\n    var getStyleLabel = function getStyleLabel(value) {\n      return getLabel(styleOptions, value);\n    };\n\n    // 通用数组切换函数\n    var toggleArrayItem = function toggleArrayItem(array, value) {\n      var index = array.indexOf(value);\n      index > -1 ? array.splice(index, 1) : array.push(value);\n    };\n\n    // 统一的选择函数\n    var selectScene = function selectScene(value) {\n      return toggleArrayItem(editOutfit.scenes, value);\n    };\n    var selectSeason = function selectSeason(value) {\n      return toggleArrayItem(editOutfit.seasons, value);\n    };\n    var selectStyle = function selectStyle(value) {\n      return toggleArrayItem(editOutfit.styles, value);\n    };\n    var hoveredIndex = ref(-1);\n\n    // 切换展开状态\n    function toggleExpand() {\n      expanded.value = !expanded.value;\n    }\n\n    // 获取堆叠样式\n    function getItemStyle(index) {\n      var _props$outfit;\n      var items = ((_props$outfit = props.outfit) === null || _props$outfit === void 0 ? void 0 : _props$outfit.items) || [];\n      var totalItems = Math.min(items.length, 4);\n      if (totalItems === 0) return {};\n      var centerIndex = (totalItems - 1) / 2;\n      var offset = index - centerIndex;\n      return {\n        transform: \"translateX(\".concat(offset * 15, \"px) rotate(\").concat(offset * 4, \"deg)\"),\n        zIndex: 10 + index,\n        opacity: hoveredIndex.value === -1 || hoveredIndex.value === index ? 1 : 0.7\n      };\n    }\n\n    // 重置堆叠效果\n    function resetStack() {\n      hoveredIndex.value = -1;\n    }\n\n    // 图片预览\n    var previewImage = ref({\n      show: false,\n      url: '',\n      name: '',\n      type: ''\n    });\n\n    // 打开图片预览\n    function openImagePreview(item) {\n      previewImage.value = {\n        show: true,\n        url: item.img,\n        name: item.name,\n        type: item.type\n      };\n    }\n\n    // 关闭图片预览\n    function closeImagePreview() {\n      previewImage.value.show = false;\n    }\n\n    // 编辑状态\n    var isEditing = ref(false);\n    var editOutfit = reactive({\n      id: '',\n      name: '',\n      scenes: [],\n      // 改为数组，支持多选\n      seasons: [],\n      // 改为数组，支持多选\n      styles: [] // 改为数组，支持多选\n    });\n\n    // 编辑相关方法\n    var editMethods = {\n      toggleEditMode: function toggleEditMode() {\n        if (isEditing.value) {\n          editMethods.cancelEdit();\n        } else {\n          editOutfit.id = props.outfit.id;\n          editOutfit.name = props.outfit.name;\n          editOutfit.scenes = props.outfit.scene ? props.outfit.scene.split(',') : [];\n          editOutfit.seasons = props.outfit.season ? [props.outfit.season] : [];\n          editOutfit.styles = props.outfit.style ? [props.outfit.style] : [];\n          isEditing.value = true;\n        }\n      },\n      saveEdit: function saveEdit() {\n        emit('edit-outfit', {\n          id: editOutfit.id,\n          name: editOutfit.name,\n          scene: editOutfit.scenes.length > 0 ? editOutfit.scenes.join(',') : '',\n          season: editOutfit.seasons.length > 0 ? editOutfit.seasons[0] : '',\n          style: editOutfit.styles.length > 0 ? editOutfit.styles[0] : ''\n        });\n        isEditing.value = false;\n      },\n      cancelEdit: function cancelEdit() {\n        isEditing.value = false;\n      }\n    };\n\n    // 保持向后兼容\n    var toggleEditMode = editMethods.toggleEditMode;\n    var saveEdit = editMethods.saveEdit;\n    var cancelEdit = editMethods.cancelEdit;\n    var __returned__ = {\n      props: props,\n      emit: emit,\n      expanded: expanded,\n      sceneOptions: sceneOptions,\n      seasonOptions: seasonOptions,\n      styleOptions: styleOptions,\n      getLabel: getLabel,\n      getSceneLabel: getSceneLabel,\n      getSeasonLabel: getSeasonLabel,\n      getStyleLabel: getStyleLabel,\n      toggleArrayItem: toggleArrayItem,\n      selectScene: selectScene,\n      selectSeason: selectSeason,\n      selectStyle: selectStyle,\n      hoveredIndex: hoveredIndex,\n      toggleExpand: toggleExpand,\n      getItemStyle: getItemStyle,\n      resetStack: resetStack,\n      previewImage: previewImage,\n      openImagePreview: openImagePreview,\n      closeImagePreview: closeImagePreview,\n      isEditing: isEditing,\n      editOutfit: editOutfit,\n      editMethods: editMethods,\n      toggleEditMode: toggleEditMode,\n      saveEdit: saveEdit,\n      cancelEdit: cancelEdit,\n      ref: ref,\n      reactive: reactive,\n      computed: computed,\n      get scenesMockData() {\n        return scenesMockData;\n      },\n      get seasonsMockData() {\n        return seasonsMockData;\n      },\n      get stylesMockData() {\n        return stylesMockData;\n      },\n      InfoChip: InfoChip\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","computed","scenesMockData","seasonsMockData","stylesMockData","InfoChip","props","__props","emit","__emit","expanded","sceneOptions","seasonOptions","styleOptions","getLabel","options","value","_options$find","find","opt","label","getSceneLabel","getSeasonLabel","getStyleLabel","toggleArrayItem","array","index","indexOf","splice","push","selectScene","editOutfit","scenes","selectSeason","seasons","selectStyle","styles","hoveredIndex","toggleExpand","getItemStyle","_props$outfit","items","outfit","totalItems","Math","min","length","centerIndex","offset","transform","concat","zIndex","opacity","resetStack","previewImage","show","url","name","type","openImagePreview","item","img","closeImagePreview","isEditing","id","editMethods","toggleEditMode","cancelEdit","scene","split","season","style","saveEdit","join"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/components/inspiration/OutfitCard.vue"],"sourcesContent":["<template>\n  <div\n    class=\"bg-gradient-to-br from-indigo-50 via-white to-purple-50 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 group border border-indigo-100/80 flex flex-col transform hover:-translate-y-1.5\"\n  >\n    <!-- 搭配预览 - 优化后的卡片顶部 -->\n    <div class=\"relative overflow-hidden\">\n      <!-- 卡片顶部渐变背景 -->\n      <div\n        class=\"absolute inset-0 bg-gradient-to-br from-indigo-500/15 via-purple-500/10 to-white/80 transform transition-transform duration-700 group-hover:scale-110\"\n      ></div>\n\n      <!-- 装饰元素 - 增强卡片深度感 -->\n      <div\n        class=\"absolute -top-12 -right-12 w-28 h-28 bg-gradient-to-r from-indigo-400/20 to-purple-400/20 rounded-full blur-2xl opacity-70 animate-pulse-slow\"\n      ></div>\n      <div\n        class=\"absolute -bottom-12 -left-12 w-28 h-28 bg-gradient-to-r from-purple-400/20 to-indigo-400/20 rounded-full blur-2xl opacity-70 animate-pulse-slow animation-delay-1000\"\n      ></div>\n      <div\n        class=\"absolute top-1/4 left-1/4 w-4 h-4 rounded-full bg-indigo-400/30 animate-ping\"\n      ></div>\n      <div\n        class=\"absolute bottom-1/3 right-1/3 w-3 h-3 rounded-full bg-purple-400/30 animate-ping animation-delay-700\"\n      ></div>\n\n      <!-- 卡片内容 -->\n      <div class=\"p-5 h-56 flex flex-col relative z-10\">\n        <!-- 顶部信息区 -->\n        <div class=\"flex justify-between items-start mb-3\">\n          <div>\n            <h4\n              class=\"font-bold text-indigo-900 text-lg truncate pr-2 group-hover:text-indigo-600 transition-colors mb-2\"\n            >\n              {{ outfit.name }}\n            </h4>\n\n            <!-- 优化的搭配信息 -->\n            <div class=\"flex flex-wrap gap-2 mt-1\">\n              <!-- 统一的信息展示组件 -->\n              <InfoChip\n                v-if=\"outfit?.scene\"\n                icon=\"map-marker-alt\"\n                label=\"场景\"\n                :values=\"outfit.scene.split(',')\"\n                :get-label=\"getSceneLabel\"\n                color-scheme=\"indigo\"\n              />\n\n              <InfoChip\n                v-if=\"outfit?.season\"\n                icon=\"leaf\"\n                label=\"季节\"\n                :values=\"[outfit.season]\"\n                :get-label=\"getSeasonLabel\"\n                color-scheme=\"green\"\n              />\n\n              <InfoChip\n                v-if=\"outfit?.style\"\n                icon=\"palette\"\n                label=\"风格\"\n                :values=\"[outfit.style]\"\n                :get-label=\"getStyleLabel\"\n                color-scheme=\"purple\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <!-- 衣物预览区 - 堆叠效果 -->\n        <div\n          class=\"flex-1 flex items-center justify-center relative\"\n          @mouseleave=\"resetStack\"\n          style=\"height: 220px\"\n        >\n          <div v-if=\"(outfit?.items?.length || 0) === 0\" class=\"text-center text-indigo-400\">\n            <div\n              class=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-100/80 to-purple-100/50 backdrop-blur-sm flex items-center justify-center mx-auto mb-3 shadow-lg border border-indigo-100/50\"\n            >\n              <font-awesome-icon icon=\"tshirt\" class=\"text-indigo-500 text-2xl\" />\n            </div>\n            <p class=\"text-sm text-indigo-500\">暂无衣物</p>\n          </div>\n          <div v-else class=\"relative w-full h-full overflow-visible\">\n            <!-- 衣物图片堆叠效果 - 重新设计 -->\n            <div class=\"relative w-full h-full flex items-center justify-center\">\n              <template v-for=\"(item, idx) in (outfit?.items || []).slice(0, 4)\" :key=\"idx\">\n                <div\n                  v-if=\"item.img\"\n                  class=\"absolute w-28 h-36 bg-gradient-to-br from-white to-indigo-50/50 rounded-xl shadow-lg overflow-hidden transition-all duration-500 ease-out cursor-pointer border-2 border-white/80 backdrop-blur-sm\"\n                  :class=\"{ 'ring-2 ring-indigo-400/30 ring-offset-1': hoveredIndex === idx }\"\n                  :style=\"getItemStyle(idx)\"\n                  @mouseenter=\"hoveredIndex = idx\"\n                  @click=\"openImagePreview(item)\"\n                >\n                  <img\n                    :src=\"item.img\"\n                    :alt=\"item.name\"\n                    class=\"w-full h-full object-cover\"\n                    loading=\"lazy\"\n                  />\n                  <div\n                    class=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2\"\n                  >\n                    <p class=\"text-white text-xs font-medium truncate\">{{ item.name }}</p>\n                    <p class=\"text-white/80 text-xs truncate\">{{ item.type }}</p>\n                  </div>\n                </div>\n              </template>\n            </div>\n\n            <!-- 更多衣物指示器 -->\n            <div\n              v-if=\"(outfit?.items?.length || 0) > 4\"\n              class=\"absolute bottom-2 right-2 w-8 h-8 rounded-full bg-indigo-500 text-white flex items-center justify-center text-xs font-bold shadow-lg z-10\"\n            >\n              +{{ (outfit?.items?.length || 0) - 4 }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- 优化的搭配信息 -->\n    <div\n      class=\"p-5 flex-shrink-0 flex flex-col bg-gradient-to-br from-indigo-50/80 via-white/90 to-purple-50/80 backdrop-blur-sm\"\n    >\n      <!-- 衣物数量统计 -->\n      <div class=\"mb-4 flex items-center justify-between\">\n        <span\n          class=\"text-sm font-medium text-indigo-700 flex items-center bg-white/70 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-sm border border-indigo-100/50\"\n        >\n          <div\n            class=\"w-5 h-5 rounded-full bg-gradient-to-r from-indigo-500/10 to-purple-500/10 flex items-center justify-center mr-2 shadow-sm\"\n          >\n            <font-awesome-icon icon=\"layer-group\" class=\"text-indigo-600 text-xs\" />\n          </div>\n          {{ outfit?.items?.length || 0 }}件衣物\n        </span>\n        <!-- 操作按钮 -->\n        <div class=\"flex gap-2\">\n          <button\n            @click=\"toggleEditMode\"\n            class=\"w-9 h-9 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-indigo-500 hover:bg-indigo-500 hover:text-white transition-all duration-300 shadow-md hover:shadow-lg border border-indigo-100/50\"\n            title=\"编辑搭配\"\n          >\n            <font-awesome-icon icon=\"edit\" class=\"text-xs\" />\n          </button>\n          <button\n            @click=\"$emit('load-outfit', outfit)\"\n            class=\"w-9 h-9 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-indigo-600 hover:bg-indigo-600 hover:text-white transition-all duration-300 shadow-md hover:shadow-lg border border-indigo-100/50\"\n            title=\"复制搭配\"\n          >\n            <font-awesome-icon icon=\"copy\" class=\"text-xs\" />\n          </button>\n          <button\n            @click=\"$emit('delete-outfit', outfit.id)\"\n            class=\"w-9 h-9 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-red-500 hover:bg-red-500 hover:text-white transition-all duration-300 shadow-md hover:shadow-lg border border-indigo-100/50\"\n            title=\"删除搭配\"\n          >\n            <font-awesome-icon icon=\"trash\" class=\"text-xs\" />\n          </button>\n        </div>\n      </div>\n\n      <!-- 主要操作按钮 -->\n      <button\n        v-if=\"!isEditing\"\n        @click=\"$emit('load-outfit', outfit)\"\n        class=\"w-full bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white font-medium py-2.5 rounded-xl transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg transform hover:-translate-y-1 active:translate-y-0 mt-auto\"\n      >\n        <font-awesome-icon :icon=\"['fas', 'eye']\" class=\"mr-2\" />\n        <span>查看详情</span>\n      </button>\n    </div>\n\n    <!-- 编辑表单 - 独立模态框 -->\n    <teleport to=\"body\">\n      <div\n        v-if=\"isEditing\"\n        class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\"\n        @click.self=\"cancelEdit\"\n      >\n        <div\n          class=\"bg-white rounded-2xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto\"\n          @click.stop\n        >\n          <div\n            class=\"p-6 bg-gradient-to-br from-indigo-50/80 via-white/90 to-purple-50/80 backdrop-blur-sm rounded-2xl\"\n          >\n            <div class=\"flex justify-between items-center mb-4 pb-2 border-b border-indigo-100/50\">\n              <h3 class=\"text-lg font-bold text-indigo-900 flex items-center\">\n                <div\n                  class=\"w-6 h-6 rounded-full bg-gradient-to-r from-indigo-500/10 to-purple-500/10 flex items-center justify-center mr-2 shadow-sm\"\n                >\n                  <font-awesome-icon icon=\"edit\" class=\"text-indigo-600 text-xs\" />\n                </div>\n                编辑搭配信息\n              </h3>\n              <button\n                @click=\"cancelEdit\"\n                class=\"w-8 h-8 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center text-gray-500 hover:text-indigo-600 hover:bg-indigo-500/10 transition-all duration-300 shadow-sm border border-indigo-100/50\"\n              >\n                <font-awesome-icon icon=\"times\" class=\"text-sm\" />\n              </button>\n            </div>\n\n            <div class=\"space-y-5\">\n              <div>\n                <label class=\"block text-sm font-medium text-indigo-700 mb-2 flex items-center\">\n                  <div\n                    class=\"w-5 h-5 rounded-full bg-gradient-to-r from-indigo-500/10 to-purple-500/10 flex items-center justify-center mr-2 shadow-sm\"\n                  >\n                    <font-awesome-icon icon=\"tag\" class=\"text-indigo-600 text-xs\" />\n                  </div>\n                  搭配名称\n                </label>\n                <div class=\"relative\">\n                  <input\n                    v-model=\"editOutfit.name\"\n                    type=\"text\"\n                    class=\"w-full px-4 py-2.5 bg-white/70 backdrop-blur-sm border border-indigo-100/50 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-400 text-sm shadow-sm transition-all duration-300\"\n                    placeholder=\"输入搭配名称\"\n                  />\n                </div>\n              </div>\n              <div>\n                <!-- 场景选择 -->\n                <label class=\"block text-sm font-medium text-indigo-700 mb-2 flex items-center\">\n                  <div\n                    class=\"w-5 h-5 rounded-full bg-gradient-to-r from-indigo-500/10 to-purple-500/10 flex items-center justify-center mr-2 shadow-sm\"\n                  >\n                    <font-awesome-icon icon=\"map-marker-alt\" class=\"text-indigo-600 text-xs\" />\n                  </div>\n                  适用场景\n                </label>\n                <div class=\"grid grid-cols-3 gap-2\">\n                  <button\n                    v-for=\"scene in sceneOptions\"\n                    :key=\"scene.value\"\n                    @click=\"selectScene(scene.value)\"\n                    class=\"py-2 px-3 rounded-lg text-sm font-medium transition-all duration-300 flex items-center justify-center shadow-sm\"\n                    :class=\"\n                      editOutfit.scenes.includes(scene.value)\n                        ? 'bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-md transform scale-[1.02]'\n                        : 'bg-white/70 backdrop-blur-sm text-indigo-700 hover:bg-indigo-100 border border-indigo-100/50'\n                    \"\n                  >\n                    <span>{{ scene.label }}</span>\n                  </button>\n                </div>\n              </div>\n\n              <!-- 季节选择 -->\n              <div>\n                <label class=\"block text-sm font-medium text-indigo-700 mb-2 flex items-center\">\n                  <div\n                    class=\"w-5 h-5 rounded-full bg-gradient-to-r from-green-500/10 to-emerald-500/10 flex items-center justify-center mr-2 shadow-sm\"\n                  >\n                    <font-awesome-icon icon=\"leaf\" class=\"text-green-600 text-xs\" />\n                  </div>\n                  适用季节\n                </label>\n                <div class=\"grid grid-cols-2 gap-2\">\n                  <button\n                    v-for=\"season in seasonOptions\"\n                    :key=\"season.value\"\n                    @click=\"selectSeason(season.value)\"\n                    class=\"py-2 px-3 rounded-lg text-sm font-medium transition-all duration-300 flex items-center justify-center shadow-sm\"\n                    :class=\"\n                      editOutfit.seasons.includes(season.value)\n                        ? 'bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-md transform scale-[1.02]'\n                        : 'bg-white/70 backdrop-blur-sm text-green-700 hover:bg-green-100 border border-green-100/50'\n                    \"\n                  >\n                    <span>{{ season.label }}</span>\n                  </button>\n                </div>\n              </div>\n\n              <!-- 风格选择 -->\n              <div>\n                <label class=\"block text-sm font-medium text-indigo-700 mb-2 flex items-center\">\n                  <div\n                    class=\"w-5 h-5 rounded-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 flex items-center justify-center mr-2 shadow-sm\"\n                  >\n                    <font-awesome-icon icon=\"palette\" class=\"text-purple-600 text-xs\" />\n                  </div>\n                  搭配风格\n                </label>\n                <div class=\"grid grid-cols-3 gap-1.5\">\n                  <button\n                    v-for=\"style in styleOptions\"\n                    :key=\"style.value\"\n                    @click=\"selectStyle(style.value)\"\n                    class=\"py-2 px-3 rounded-lg text-sm font-medium transition-all duration-300 flex items-center justify-center shadow-sm\"\n                    :class=\"\n                      editOutfit.styles.includes(style.value)\n                        ? 'bg-gradient-to-r from-purple-500 to-pink-500 text-white shadow-md transform scale-[1.02]'\n                        : 'bg-white/70 backdrop-blur-sm text-purple-700 hover:bg-purple-100 border border-purple-100/50'\n                    \"\n                  >\n                    <span>{{ style.label }}</span>\n                  </button>\n                </div>\n              </div>\n              <div class=\"flex gap-2 pt-2\">\n                <button\n                  @click=\"saveEdit\"\n                  class=\"flex-1 bg-primary hover:bg-primary/90 text-white font-medium py-2 rounded-lg transition-colors flex items-center justify-center\"\n                >\n                  <font-awesome-icon :icon=\"['fas', 'save']\" class=\"mr-1 text-xs\" />\n                  保存\n                </button>\n                <button\n                  @click=\"cancelEdit\"\n                  class=\"flex-1 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-medium py-2 rounded-lg transition-colors flex items-center justify-center\"\n                >\n                  取消\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </teleport>\n  </div>\n</template>\n\n<script setup>\n  import { ref, reactive, computed } from 'vue';\n  import { scenesMockData, seasonsMockData, stylesMockData } from '../../mock/data';\n  import InfoChip from './InfoChip.vue';\n\n  // Props定义\n  const props = defineProps({\n    outfit: {\n      type: Object,\n      required: true,\n    },\n  });\n\n  // 事件定义\n  const emit = defineEmits(['load-outfit', 'delete-outfit', 'edit-outfit']);\n\n  // 状态管理\n  const expanded = ref(false);\n\n  // 场景选项映射\n  const sceneOptions = scenesMockData;\n\n  // 季节选项映射\n  const seasonOptions = seasonsMockData;\n\n  // 风格选项映射\n  const styleOptions = stylesMockData;\n\n  // 通用工具函数 - 获取标签\n  const getLabel = (options, value) => options.find(opt => opt.value === value)?.label || value;\n\n  const getSceneLabel = value => getLabel(sceneOptions, value);\n  const getSeasonLabel = value => getLabel(seasonOptions, value);\n  const getStyleLabel = value => getLabel(styleOptions, value);\n\n  // 通用数组切换函数\n  const toggleArrayItem = (array, value) => {\n    const index = array.indexOf(value);\n    index > -1 ? array.splice(index, 1) : array.push(value);\n  };\n\n  // 统一的选择函数\n  const selectScene = value => toggleArrayItem(editOutfit.scenes, value);\n  const selectSeason = value => toggleArrayItem(editOutfit.seasons, value);\n  const selectStyle = value => toggleArrayItem(editOutfit.styles, value);\n  const hoveredIndex = ref(-1);\n\n  // 切换展开状态\n  function toggleExpand() {\n    expanded.value = !expanded.value;\n  }\n\n  // 获取堆叠样式\n  function getItemStyle(index) {\n    const items = props.outfit?.items || [];\n    const totalItems = Math.min(items.length, 4);\n    if (totalItems === 0) return {};\n\n    const centerIndex = (totalItems - 1) / 2;\n    const offset = index - centerIndex;\n\n    return {\n      transform: `translateX(${offset * 15}px) rotate(${offset * 4}deg)`,\n      zIndex: 10 + index,\n      opacity: hoveredIndex.value === -1 || hoveredIndex.value === index ? 1 : 0.7,\n    };\n  }\n\n  // 重置堆叠效果\n  function resetStack() {\n    hoveredIndex.value = -1;\n  }\n\n  // 图片预览\n  const previewImage = ref({\n    show: false,\n    url: '',\n    name: '',\n    type: '',\n  });\n\n  // 打开图片预览\n  function openImagePreview(item) {\n    previewImage.value = {\n      show: true,\n      url: item.img,\n      name: item.name,\n      type: item.type,\n    };\n  }\n\n  // 关闭图片预览\n  function closeImagePreview() {\n    previewImage.value.show = false;\n  }\n\n  // 编辑状态\n  const isEditing = ref(false);\n  const editOutfit = reactive({\n    id: '',\n    name: '',\n    scenes: [], // 改为数组，支持多选\n    seasons: [], // 改为数组，支持多选\n    styles: [], // 改为数组，支持多选\n  });\n\n  // 编辑相关方法\n  const editMethods = {\n    toggleEditMode: () => {\n      if (isEditing.value) {\n        editMethods.cancelEdit();\n      } else {\n        editOutfit.id = props.outfit.id;\n        editOutfit.name = props.outfit.name;\n        editOutfit.scenes = props.outfit.scene ? props.outfit.scene.split(',') : [];\n        editOutfit.seasons = props.outfit.season ? [props.outfit.season] : [];\n        editOutfit.styles = props.outfit.style ? [props.outfit.style] : [];\n        isEditing.value = true;\n      }\n    },\n\n    saveEdit: () => {\n      emit('edit-outfit', {\n        id: editOutfit.id,\n        name: editOutfit.name,\n        scene: editOutfit.scenes.length > 0 ? editOutfit.scenes.join(',') : '',\n        season: editOutfit.seasons.length > 0 ? editOutfit.seasons[0] : '',\n        style: editOutfit.styles.length > 0 ? editOutfit.styles[0] : '',\n      });\n      isEditing.value = false;\n    },\n\n    cancelEdit: () => {\n      isEditing.value = false;\n    },\n  };\n\n  // 保持向后兼容\n  const toggleEditMode = editMethods.toggleEditMode;\n  const saveEdit = editMethods.saveEdit;\n  const cancelEdit = editMethods.cancelEdit;\n</script>\n\n<style scoped>\n  /* 自定义动画 */\n  @keyframes pulse-slow {\n    0%,\n    100% {\n      opacity: 1;\n    }\n    50% {\n      opacity: 0.7;\n    }\n  }\n\n  .animate-pulse-slow {\n    animation: pulse-slow 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n  }\n\n  .animation-delay-1000 {\n    animation-delay: 1s;\n  }\n\n  /* 图片预览模态框 */\n  :deep(.modal-backdrop) {\n    backdrop-filter: blur(8px);\n    background-color: rgba(0, 0, 0, 0.5);\n  }\n\n  /* 响应式设计 */\n  @media (max-width: 640px) {\n    .outfit-card {\n      @apply rounded-lg shadow-md;\n    }\n\n    .outfit-info {\n      @apply p-3;\n    }\n\n    .clothing-preview {\n      @apply grid-cols-2 gap-2;\n    }\n\n    .outfit-actions {\n      @apply flex-col space-y-2;\n    }\n  }\n\n  @media (max-width: 768px) {\n    .clothing-stack {\n      @apply grid-cols-2 gap-4;\n    }\n\n    .outfit-meta {\n      @apply flex-col space-y-2;\n    }\n  }\n\n  @media (min-width: 1024px) {\n    .outfit-card:hover {\n      @apply transform scale-105;\n    }\n  }\n\n  /* 移动端优化 */\n  @media (hover: none) {\n    .outfit-card:active {\n      @apply transform scale-95;\n    }\n  }\n</style>\n"],"mappings":"AA0UE,SAASA,GAAG,EAAEC,QAAQ,EAAEC,QAAQ,QAAQ,KAAK;AAC7C,SAASC,cAAc,EAAEC,eAAe,EAAEC,cAAc,QAAQ,iBAAiB;AACjF,OAAOC,QAAQ,MAAM,gBAAgB;;AAErC;;;;;;;;;;;;;;;IACA,IAAMC,KAAK,GAAGC,OAKZ;;IAEF;IACA,IAAMC,IAAI,GAAGC,MAA4D;;IAEzE;IACA,IAAMC,QAAQ,GAAGX,GAAG,CAAC,KAAK,CAAC;;IAE3B;IACA,IAAMY,YAAY,GAAGT,cAAc;;IAEnC;IACA,IAAMU,aAAa,GAAGT,eAAe;;IAErC;IACA,IAAMU,YAAY,GAAGT,cAAc;;IAEnC;IACA,IAAMU,QAAQ,GAAG,SAAXA,QAAQA,CAAIC,OAAO,EAAEC,KAAK;MAAA,IAAAC,aAAA;MAAA,OAAK,EAAAA,aAAA,GAAAF,OAAO,CAACG,IAAI,CAAC,UAAAC,GAAG;QAAA,OAAIA,GAAG,CAACH,KAAK,KAAKA,KAAK;MAAA,EAAC,cAAAC,aAAA,uBAAxCA,aAAA,CAA0CG,KAAK,KAAIJ,KAAK;IAAA;IAE7F,IAAMK,aAAa,GAAG,SAAhBA,aAAaA,CAAGL,KAAK;MAAA,OAAIF,QAAQ,CAACH,YAAY,EAAEK,KAAK,CAAC;IAAA;IAC5D,IAAMM,cAAc,GAAG,SAAjBA,cAAcA,CAAGN,KAAK;MAAA,OAAIF,QAAQ,CAACF,aAAa,EAAEI,KAAK,CAAC;IAAA;IAC9D,IAAMO,aAAa,GAAG,SAAhBA,aAAaA,CAAGP,KAAK;MAAA,OAAIF,QAAQ,CAACD,YAAY,EAAEG,KAAK,CAAC;IAAA;;IAE5D;IACA,IAAMQ,eAAe,GAAG,SAAlBA,eAAeA,CAAIC,KAAK,EAAET,KAAK,EAAK;MACxC,IAAMU,KAAK,GAAGD,KAAK,CAACE,OAAO,CAACX,KAAK,CAAC;MAClCU,KAAK,GAAG,CAAC,CAAC,GAAGD,KAAK,CAACG,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC,GAAGD,KAAK,CAACI,IAAI,CAACb,KAAK,CAAC;IACzD,CAAC;;IAED;IACA,IAAMc,WAAW,GAAG,SAAdA,WAAWA,CAAGd,KAAK;MAAA,OAAIQ,eAAe,CAACO,UAAU,CAACC,MAAM,EAAEhB,KAAK,CAAC;IAAA;IACtE,IAAMiB,YAAY,GAAG,SAAfA,YAAYA,CAAGjB,KAAK;MAAA,OAAIQ,eAAe,CAACO,UAAU,CAACG,OAAO,EAAElB,KAAK,CAAC;IAAA;IACxE,IAAMmB,WAAW,GAAG,SAAdA,WAAWA,CAAGnB,KAAK;MAAA,OAAIQ,eAAe,CAACO,UAAU,CAACK,MAAM,EAAEpB,KAAK,CAAC;IAAA;IACtE,IAAMqB,YAAY,GAAGtC,GAAG,CAAC,CAAC,CAAC,CAAC;;IAE5B;IACA,SAASuC,YAAYA,CAAA,EAAG;MACtB5B,QAAQ,CAACM,KAAK,GAAG,CAACN,QAAQ,CAACM,KAAK;IAClC;;IAEA;IACA,SAASuB,YAAYA,CAACb,KAAK,EAAE;MAAA,IAAAc,aAAA;MAC3B,IAAMC,KAAK,GAAG,EAAAD,aAAA,GAAAlC,KAAK,CAACoC,MAAM,cAAAF,aAAA,uBAAZA,aAAA,CAAcC,KAAK,KAAI,EAAE;MACvC,IAAME,UAAU,GAAGC,IAAI,CAACC,GAAG,CAACJ,KAAK,CAACK,MAAM,EAAE,CAAC,CAAC;MAC5C,IAAIH,UAAU,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;MAE/B,IAAMI,WAAW,GAAG,CAACJ,UAAU,GAAG,CAAC,IAAI,CAAC;MACxC,IAAMK,MAAM,GAAGtB,KAAK,GAAGqB,WAAW;MAElC,OAAO;QACLE,SAAS,gBAAAC,MAAA,CAAgBF,MAAM,GAAG,EAAE,iBAAAE,MAAA,CAAcF,MAAM,GAAG,CAAC,SAAM;QAClEG,MAAM,EAAE,EAAE,GAAGzB,KAAK;QAClB0B,OAAO,EAAEf,YAAY,CAACrB,KAAK,KAAK,CAAC,CAAC,IAAIqB,YAAY,CAACrB,KAAK,KAAKU,KAAK,GAAG,CAAC,GAAG;MAC3E,CAAC;IACH;;IAEA;IACA,SAAS2B,UAAUA,CAAA,EAAG;MACpBhB,YAAY,CAACrB,KAAK,GAAG,CAAC,CAAC;IACzB;;IAEA;IACA,IAAMsC,YAAY,GAAGvD,GAAG,CAAC;MACvBwD,IAAI,EAAE,KAAK;MACXC,GAAG,EAAE,EAAE;MACPC,IAAI,EAAE,EAAE;MACRC,IAAI,EAAE;IACR,CAAC,CAAC;;IAEF;IACA,SAASC,gBAAgBA,CAACC,IAAI,EAAE;MAC9BN,YAAY,CAACtC,KAAK,GAAG;QACnBuC,IAAI,EAAE,IAAI;QACVC,GAAG,EAAEI,IAAI,CAACC,GAAG;QACbJ,IAAI,EAAEG,IAAI,CAACH,IAAI;QACfC,IAAI,EAAEE,IAAI,CAACF;MACb,CAAC;IACH;;IAEA;IACA,SAASI,iBAAiBA,CAAA,EAAG;MAC3BR,YAAY,CAACtC,KAAK,CAACuC,IAAI,GAAG,KAAK;IACjC;;IAEA;IACA,IAAMQ,SAAS,GAAGhE,GAAG,CAAC,KAAK,CAAC;IAC5B,IAAMgC,UAAU,GAAG/B,QAAQ,CAAC;MAC1BgE,EAAE,EAAE,EAAE;MACNP,IAAI,EAAE,EAAE;MACRzB,MAAM,EAAE,EAAE;MAAE;MACZE,OAAO,EAAE,EAAE;MAAE;MACbE,MAAM,EAAE,EAAE,CAAE;IACd,CAAC,CAAC;;IAEF;IACA,IAAM6B,WAAW,GAAG;MAClBC,cAAc,EAAE,SAAhBA,cAAcA,CAAA,EAAQ;QACpB,IAAIH,SAAS,CAAC/C,KAAK,EAAE;UACnBiD,WAAW,CAACE,UAAU,CAAC,CAAC;QAC1B,CAAC,MAAM;UACLpC,UAAU,CAACiC,EAAE,GAAG1D,KAAK,CAACoC,MAAM,CAACsB,EAAE;UAC/BjC,UAAU,CAAC0B,IAAI,GAAGnD,KAAK,CAACoC,MAAM,CAACe,IAAI;UACnC1B,UAAU,CAACC,MAAM,GAAG1B,KAAK,CAACoC,MAAM,CAAC0B,KAAK,GAAG9D,KAAK,CAACoC,MAAM,CAAC0B,KAAK,CAACC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE;UAC3EtC,UAAU,CAACG,OAAO,GAAG5B,KAAK,CAACoC,MAAM,CAAC4B,MAAM,GAAG,CAAChE,KAAK,CAACoC,MAAM,CAAC4B,MAAM,CAAC,GAAG,EAAE;UACrEvC,UAAU,CAACK,MAAM,GAAG9B,KAAK,CAACoC,MAAM,CAAC6B,KAAK,GAAG,CAACjE,KAAK,CAACoC,MAAM,CAAC6B,KAAK,CAAC,GAAG,EAAE;UAClER,SAAS,CAAC/C,KAAK,GAAG,IAAI;QACxB;MACF,CAAC;MAEDwD,QAAQ,EAAE,SAAVA,QAAQA,CAAA,EAAQ;QACdhE,IAAI,CAAC,aAAa,EAAE;UAClBwD,EAAE,EAAEjC,UAAU,CAACiC,EAAE;UACjBP,IAAI,EAAE1B,UAAU,CAAC0B,IAAI;UACrBW,KAAK,EAAErC,UAAU,CAACC,MAAM,CAACc,MAAM,GAAG,CAAC,GAAGf,UAAU,CAACC,MAAM,CAACyC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE;UACtEH,MAAM,EAAEvC,UAAU,CAACG,OAAO,CAACY,MAAM,GAAG,CAAC,GAAGf,UAAU,CAACG,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE;UAClEqC,KAAK,EAAExC,UAAU,CAACK,MAAM,CAACU,MAAM,GAAG,CAAC,GAAGf,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,GAAG;QAC/D,CAAC,CAAC;QACF2B,SAAS,CAAC/C,KAAK,GAAG,KAAK;MACzB,CAAC;MAEDmD,UAAU,EAAE,SAAZA,UAAUA,CAAA,EAAQ;QAChBJ,SAAS,CAAC/C,KAAK,GAAG,KAAK;MACzB;IACF,CAAC;;IAED;IACA,IAAMkD,cAAc,GAAGD,WAAW,CAACC,cAAc;IACjD,IAAMM,QAAQ,GAAGP,WAAW,CAACO,QAAQ;IACrC,IAAML,UAAU,GAAGF,WAAW,CAACE,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}