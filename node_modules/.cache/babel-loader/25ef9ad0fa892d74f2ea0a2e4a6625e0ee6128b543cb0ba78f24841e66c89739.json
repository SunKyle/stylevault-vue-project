{"ast":null,"code":"function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createBlock as _createBlock, TransitionGroup as _TransitionGroup, withCtx as _withCtx } from \"vue\";\nvar _hoisted_1 = {\n  key: 0,\n  \"class\": \"container mx-auto px-4 mb-12\"\n};\nvar _hoisted_2 = {\n  \"class\": \"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4\"\n};\nvar _hoisted_3 = {\n  \"class\": \"flex items-center space-x-2\"\n};\nvar _hoisted_4 = {\n  \"class\": \"px-2 py-1 bg-primary/10 text-primary rounded-full text-xs font-medium\"\n};\nvar _hoisted_5 = {\n  \"class\": \"flex flex-wrap gap-2\"\n};\nvar _hoisted_6 = {\n  \"class\": \"flex items-center space-x-2 bg-white rounded-lg px-3 py-1.5 shadow-sm\"\n};\nvar _hoisted_7 = [\"value\"];\nvar _hoisted_8 = {\n  \"class\": \"flex items-center space-x-2 bg-white rounded-lg px-3 py-1.5 shadow-sm\"\n};\nvar _hoisted_9 = {\n  \"class\": \"flex items-center space-x-2\"\n};\nvar _hoisted_10 = {\n  \"class\": \"text-sm text-gray-500\"\n};\nvar _hoisted_11 = {\n  \"class\": \"flex space-x-1\"\n};\nvar _hoisted_12 = [\"disabled\"];\nvar _hoisted_13 = [\"disabled\"];\nvar _hoisted_14 = {\n  \"class\": \"relative overflow-hidden\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  return !$setup.loading && !$setup.error && $setup.favoriteItems.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[2] || (_cache[2] = _createElementVNode(\"h3\", {\n    \"class\": \"text-xl md:text-2xl font-bold\"\n  }, \"我的收藏\", -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_4, _toDisplayString($setup.filteredFavoriteItems.length), 1 /* TEXT */)]), _createCommentVNode(\" 筛选项 \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'filter'],\n    \"class\": \"text-neutral-500 text-xs\"\n  }), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $setup.selectedCategory = $event;\n    }),\n    \"class\": \"text-sm bg-transparent border-none focus:outline-none focus:ring-0 text-gray-700\"\n  }, [_cache[3] || (_cache[3] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"所有分类\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.categories, function (category) {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: category.id,\n      value: category.id\n    }, _toDisplayString(category.name), 9 /* TEXT, PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.selectedCategory]])]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'sort'],\n    \"class\": \"text-neutral-500 text-xs\"\n  }), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $setup.sortBy = $event;\n    }),\n    \"class\": \"text-sm bg-transparent border-none focus:outline-none focus:ring-0 text-gray-700\"\n  }, _toConsumableArray(_cache[4] || (_cache[4] = [_createElementVNode(\"option\", {\n    value: \"recent\"\n  }, \"最近添加\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"name\"\n  }, \"名称\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"brand\"\n  }, \"品牌\", -1 /* CACHED */)])), 512 /* NEED_PATCH */), [[_vModelSelect, $setup.sortBy]])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", _hoisted_10, _toDisplayString($setup.currentPage) + \" / \" + _toDisplayString($setup.totalPages), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"button\", {\n    onClick: $setup.prevFavorite,\n    disabled: $setup.favoriteIndex === 0,\n    \"class\": \"w-8 h-8 rounded-full bg-white shadow-soft flex items-center justify-center hover:bg-neutral-50 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'chevron-left'],\n    \"class\": \"text-neutral-600 text-xs\"\n  })], 8 /* PROPS */, _hoisted_12), _createElementVNode(\"button\", {\n    onClick: $setup.nextFavorite,\n    disabled: $setup.favoriteIndex >= $setup.filteredFavoriteItems.length - $setup.itemsPerPage,\n    \"class\": \"w-8 h-8 rounded-full bg-white shadow-soft flex items-center justify-center hover:bg-neutral-50 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'chevron-right'],\n    \"class\": \"text-neutral-600 text-xs\"\n  })], 8 /* PROPS */, _hoisted_13)])])])]), _createElementVNode(\"div\", _hoisted_14, [_createVNode(_TransitionGroup, {\n    name: \"favorite-fade\",\n    tag: \"div\",\n    \"class\": \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 sm:gap-5\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.displayedFavoriteItems, function (item) {\n        return _openBlock(), _createBlock($setup[\"ClothingItem\"], {\n          key: item.id,\n          item: item,\n          showInFavoriteMode: true,\n          onLike: function onLike($event) {\n            return $setup.toggleFavorite(item);\n          }\n        }, null, 8 /* PROPS */, [\"item\", \"onLike\"]);\n      }), 128 /* KEYED_FRAGMENT */))];\n    }),\n    _: 1 /* STABLE */\n  })])])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["$setup","loading","error","favoriteItems","length","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","filteredFavoriteItems","_createCommentVNode","_hoisted_5","_hoisted_6","_createVNode","_component_font_awesome_icon","icon","selectedCategory","$event","value","_Fragment","_renderList","categories","category","key","id","name","_hoisted_7","_hoisted_8","sortBy","_hoisted_9","_hoisted_10","currentPage","totalPages","_hoisted_11","onClick","prevFavorite","disabled","favoriteIndex","nextFavorite","itemsPerPage","_hoisted_14","_TransitionGroup","tag","displayedFavoriteItems","item","_createBlock","showInFavoriteMode","onLike","toggleFavorite"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/components/wardrobe/FavoriteSection.vue"],"sourcesContent":["<template>\n  <div v-if=\"!loading && !error && favoriteItems.length > 0\" class=\"container mx-auto px-4 mb-12\">\n    <div class=\"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4\">\n      <div class=\"flex items-center space-x-2\">\n        <h3 class=\"text-xl md:text-2xl font-bold\">我的收藏</h3>\n        <span class=\"px-2 py-1 bg-primary/10 text-primary rounded-full text-xs font-medium\">{{ filteredFavoriteItems.length }}</span>\n      </div>\n      \n      <!-- 筛选项 -->\n      <div class=\"flex flex-wrap gap-2\">\n        <div class=\"flex items-center space-x-2 bg-white rounded-lg px-3 py-1.5 shadow-sm\">\n          <font-awesome-icon :icon=\"['fas', 'filter']\" class=\"text-neutral-500 text-xs\" />\n          <select \n            v-model=\"selectedCategory\" \n            class=\"text-sm bg-transparent border-none focus:outline-none focus:ring-0 text-gray-700\"\n          >\n            <option value=\"\">所有分类</option>\n            <option v-for=\"category in categories\" :key=\"category.id\" :value=\"category.id\">\n              {{ category.name }}\n            </option>\n          </select>\n        </div>\n        \n        <div class=\"flex items-center space-x-2 bg-white rounded-lg px-3 py-1.5 shadow-sm\">\n          <font-awesome-icon :icon=\"['fas', 'sort']\" class=\"text-neutral-500 text-xs\" />\n          <select \n            v-model=\"sortBy\" \n            class=\"text-sm bg-transparent border-none focus:outline-none focus:ring-0 text-gray-700\"\n          >\n            <option value=\"recent\">最近添加</option>\n            <option value=\"name\">名称</option>\n            <option value=\"brand\">品牌</option>\n          </select>\n        </div>\n        \n        <div class=\"flex items-center space-x-2\">\n          <span class=\"text-sm text-gray-500\">{{ currentPage }} / {{ totalPages }}</span>\n          <div class=\"flex space-x-1\">\n            <button\n              @click=\"prevFavorite\"\n              :disabled=\"favoriteIndex === 0\"\n              class=\"w-8 h-8 rounded-full bg-white shadow-soft flex items-center justify-center hover:bg-neutral-50 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"\n            >\n              <font-awesome-icon :icon=\"['fas', 'chevron-left']\" class=\"text-neutral-600 text-xs\" />\n            </button>\n            <button\n              @click=\"nextFavorite\"\n              :disabled=\"favoriteIndex >= filteredFavoriteItems.length - itemsPerPage\"\n              class=\"w-8 h-8 rounded-full bg-white shadow-soft flex items-center justify-center hover:bg-neutral-50 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"\n            >\n              <font-awesome-icon :icon=\"['fas', 'chevron-right']\" class=\"text-neutral-600 text-xs\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"relative overflow-hidden\">\n      <transition-group\n        name=\"favorite-fade\"\n        tag=\"div\"\n        class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 sm:gap-5\"\n      >\n        <ClothingItem\n          v-for=\"item in displayedFavoriteItems\"\n          :key=\"item.id\"\n          :item=\"item\"\n          :showInFavoriteMode=\"true\"\n          @like=\"toggleFavorite(item)\"\n        />\n      </transition-group>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { computed, ref, watch } from 'vue'\nimport { useWardrobeStore } from '@/stores/wardrobeStore'\nimport ClothingItem from '../common/ui/ClothingItem.vue'\n\nconst wardrobeStore = useWardrobeStore()\n\n// 状态\nconst favoriteIndex = ref(0)\nconst itemsPerPage = ref(12) // 每页显示12个物品\nconst selectedCategory = ref('') // 选中的分类筛选\nconst sortBy = ref('recent') // 排序方式\n\n// 计算属性\nconst categories = computed(() => wardrobeStore.categories)\nconst favoriteItems = computed(() => wardrobeStore.favoriteItems)\n\n// 筛选和排序后的收藏物品\nconst filteredFavoriteItems = computed(() => {\n  let result = [...favoriteItems.value]\n  \n  // 分类筛选\n  if (selectedCategory.value) {\n    result = result.filter(item => item.categoryId === selectedCategory.value)\n  }\n  \n  // 排序\n  switch (sortBy.value) {\n    case 'recent':\n      result.sort((a, b) => new Date(b.purchaseDate) - new Date(a.purchaseDate))\n      break\n    case 'name':\n      result.sort((a, b) => a.name.localeCompare(b.name))\n      break\n    case 'brand':\n      result.sort((a, b) => {\n        const brandA = a.brand || ''\n        const brandB = b.brand || ''\n        return brandA.localeCompare(brandB)\n      })\n      break\n  }\n  \n  return result\n})\n\n// 当前页显示的收藏物品\nconst displayedFavoriteItems = computed(() => {\n  return filteredFavoriteItems.value.slice(favoriteIndex.value, favoriteIndex.value + itemsPerPage.value)\n})\n\n// 分页计算\nconst currentPage = computed(() => Math.floor(favoriteIndex.value / itemsPerPage.value) + 1)\nconst totalPages = computed(() => Math.ceil(filteredFavoriteItems.value.length / itemsPerPage.value))\nconst loading = computed(() => wardrobeStore.loading)\nconst error = computed(() => wardrobeStore.error)\n\n// 方法\nfunction prevFavorite() {\n  if (favoriteIndex.value > 0) favoriteIndex.value -= itemsPerPage.value\n}\n\nfunction nextFavorite() {\n  if (favoriteIndex.value < filteredFavoriteItems.value.length - itemsPerPage.value) {\n    favoriteIndex.value += itemsPerPage.value\n  }\n}\n\n// 当筛选条件变化时，重置分页\nfunction resetPagination() {\n  favoriteIndex.value = 0\n}\n\n// 监听筛选条件变化\nwatch([selectedCategory, sortBy], () => {\n  resetPagination()\n})\n\nasync function toggleFavorite(item) {\n  try {\n    await wardrobeStore.toggleFavorite(item.id)\n  } catch (error) {\n    console.error('切换收藏状态失败:', error)\n  }\n}\n</script>\n\n<style scoped>\n/* 翻页动画效果 */\n.favorite-fade-enter-active,\n.favorite-fade-leave-active {\n  transition: all 0.5s ease;\n}\n\n.favorite-fade-enter-from {\n  opacity: 0;\n  transform: translateY(20px);\n}\n\n.favorite-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-20px);\n}\n\n.favorite-fade-move {\n  transition: transform 0.5s ease;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}