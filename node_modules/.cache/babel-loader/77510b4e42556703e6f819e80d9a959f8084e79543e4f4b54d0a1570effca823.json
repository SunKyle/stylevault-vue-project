{"ast":null,"code":"import { useModel as _useModel, mergeModels as _mergeModels } from 'vue';\nimport { ref } from 'vue';\nimport { showToast } from '../../../utils/toast';\n\n// 搭配信息\n\nexport default {\n  __name: 'OutfitPreviewPanel',\n  props: /*@__PURE__*/_mergeModels({\n    selectedClothes: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    }\n  }, {\n    \"outfitName\": {\n      type: String,\n      \"default\": ''\n    },\n    \"outfitNameModifiers\": {},\n    \"outfitScene\": {\n      type: String,\n      \"default\": ''\n    },\n    \"outfitSceneModifiers\": {}\n  }),\n  emits: /*@__PURE__*/_mergeModels(['remove-cloth', 'reset-clothes', 'save-outfit', 'add-cloth'], [\"update:outfitName\", \"update:outfitScene\"]),\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose,\n      __emit = _ref.emit;\n    __expose();\n    var outfitName = _useModel(__props, 'outfitName');\n    var outfitScene = _useModel(__props, 'outfitScene');\n\n    // 图片预览状态\n    var previewImage = ref({\n      show: false,\n      url: '',\n      name: '',\n      type: ''\n    });\n\n    // 拖放状态\n    var isDragOver = ref(false);\n\n    // 衣物位置状态\n    var itemPositions = ref({});\n\n    // 当前拖动的衣物索引\n    var draggingIndex = ref(-1);\n\n    // 获取衣物样式\n    function getItemStyle(idx, item) {\n      // 如果有保存的位置，使用保存的位置\n      if (itemPositions.value[idx]) {\n        var _itemPositions$value$ = itemPositions.value[idx],\n          x = _itemPositions$value$.x,\n          y = _itemPositions$value$.y,\n          rotation = _itemPositions$value$.rotation;\n        return {\n          transform: \"translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"deg)\"),\n          '--index': idx,\n          zIndex: draggingIndex.value === idx ? 20 : 10\n        };\n      }\n\n      // 否则使用默认位置\n      return {\n        transform: \"translateY(\".concat((idx % 3 - 1) * 10, \"px) rotate(\").concat((idx % 2 === 0 ? -1 : 1) * (idx % 3), \"deg)\"),\n        '--index': idx,\n        zIndex: draggingIndex.value === idx ? 20 : 10\n      };\n    }\n\n    // 开始拖动\n    function startDrag(event, idx) {\n      draggingIndex.value = idx;\n\n      // 获取初始位置\n      var startX = event.clientX;\n      var startY = event.clientY;\n\n      // 获取当前位置\n      var currentPos = itemPositions.value[idx] || {\n        x: 0,\n        y: (idx % 3 - 1) * 10,\n        rotation: (idx % 2 === 0 ? -1 : 1) * (idx % 3)\n      };\n\n      // 鼠标移动处理函数\n      function handleMouseMove(e) {\n        var deltaX = e.clientX - startX;\n        var deltaY = e.clientY - startY;\n\n        // 更新位置\n        itemPositions.value[idx] = {\n          x: currentPos.x + deltaX,\n          y: currentPos.y + deltaY,\n          rotation: currentPos.rotation\n        };\n      }\n\n      // 鼠标释放处理函数\n      function handleMouseUp() {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n        draggingIndex.value = -1;\n      }\n\n      // 添加事件监听\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n\n      // 阻止默认行为\n      event.preventDefault();\n    }\n\n    // 打开图片预览\n    function openImagePreview(item) {\n      previewImage.value = {\n        show: true,\n        url: item.img,\n        name: item.name,\n        type: item.type\n      };\n    }\n\n    // 关闭图片预览\n    function closeImagePreview() {\n      previewImage.value.show = false;\n    }\n\n    // 处理拖拽悬停\n    function handleDragOver(event) {\n      // 阻止默认行为以允许放置\n      event.preventDefault();\n      isDragOver.value = true;\n      event.currentTarget.classList.add('drag-over');\n    }\n\n    // 处理拖拽离开\n    function handleDragLeave(event) {\n      // 只有当鼠标真正离开预览区域时才隐藏提示\n      // 检查相关目标是否是预览区域的子元素\n      if (!event.currentTarget.contains(event.relatedTarget)) {\n        isDragOver.value = false;\n        event.currentTarget.classList.remove('drag-over');\n      }\n    }\n\n    // 处理拖放\n    function handleDrop(event) {\n      // 阻止默认行为\n      event.preventDefault();\n      isDragOver.value = false;\n      event.currentTarget.classList.remove('drag-over');\n      try {\n        // 获取拖拽的数据\n        var itemData = JSON.parse(event.dataTransfer.getData('text/plain'));\n\n        // 触发添加衣物事件\n        emit('add-cloth', itemData);\n\n        // 添加成功反馈\n        showToast('已添加到搭配', 'success');\n      } catch (error) {\n        console.error('处理拖放数据失败:', error);\n        showToast('添加失败，请重试', 'error');\n      }\n    }\n\n    // 定义emit\n    var emit = __emit;\n\n    // 处理保存搭配\n    function handleSaveOutfit() {\n      if (!outfitName.value.trim()) {\n        alert('请输入搭配名称');\n        return;\n      }\n      emit('save-outfit', {\n        name: outfitName.value,\n        scene: outfitScene.value\n      });\n    }\n\n    // 移除衣物\n    function removeItem(index) {\n      emit('remove-cloth', index);\n      showToast('已从搭配中移除', 'info');\n    }\n    var __returned__ = {\n      outfitName: outfitName,\n      outfitScene: outfitScene,\n      previewImage: previewImage,\n      isDragOver: isDragOver,\n      itemPositions: itemPositions,\n      draggingIndex: draggingIndex,\n      getItemStyle: getItemStyle,\n      startDrag: startDrag,\n      openImagePreview: openImagePreview,\n      closeImagePreview: closeImagePreview,\n      handleDragOver: handleDragOver,\n      handleDragLeave: handleDragLeave,\n      handleDrop: handleDrop,\n      emit: emit,\n      handleSaveOutfit: handleSaveOutfit,\n      removeItem: removeItem,\n      ref: ref,\n      get showToast() {\n        return showToast;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","showToast","outfitName","_useModel","__props","outfitScene","previewImage","show","url","name","type","isDragOver","itemPositions","draggingIndex","getItemStyle","idx","item","value","_itemPositions$value$","x","y","rotation","transform","concat","zIndex","startDrag","event","startX","clientX","startY","clientY","currentPos","handleMouseMove","e","deltaX","deltaY","handleMouseUp","document","removeEventListener","addEventListener","preventDefault","openImagePreview","img","closeImagePreview","handleDragOver","currentTarget","classList","add","handleDragLeave","contains","relatedTarget","remove","handleDrop","itemData","JSON","parse","dataTransfer","getData","emit","error","console","__emit","handleSaveOutfit","trim","alert","scene","removeItem","index"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/components/features/inspiration/OutfitPreviewPanel.vue"],"sourcesContent":["<template>\n  <div class=\"bg-gradient-to-br from-white to-neutral-50 rounded-2xl shadow-lg overflow-hidden border border-neutral-100 h-full flex flex-col transform transition-all duration-300 hover:shadow-xl\">\n    <div class=\"bg-gradient-to-r from-primary/10 to-secondary/10 p-5 border-b border-neutral-100\">\n      <div class=\"flex justify-between items-center\">\n        <h3 class=\"font-bold text-lg flex items-center text-neutral-800\">\n          <div class=\"w-8 h-8 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center mr-2 shadow-sm\">\n            <font-awesome-icon icon=\"lightbulb\" class=\"text-white text-sm\" />\n          </div>\n          搭配灵感\n        </h3>\n        <div class=\"flex items-center gap-2\">\n          <span class=\"bg-white/80 backdrop-blur-sm text-primary px-3 py-1 rounded-full font-medium text-sm shadow-sm\">\n            {{ selectedClothes.length }}件衣物\n          </span>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"flex-1 p-5 flex flex-col\">\n      <!-- 搭配预览区 -->\n      <div class=\"bg-gradient-to-br from-primary/8 to-secondary/8 rounded-2xl p-5 h-64 md:h-72 flex flex-col items-center justify-center mb-5 border border-neutral-100/50 relative overflow-hidden shadow-inner\">\n        <!-- 装饰元素 -->\n        <div class=\"absolute -bottom-12 -right-12 w-48 h-48 bg-gradient-to-r from-primary/10 to-secondary/10 rounded-full blur-xl\"></div>\n        <div class=\"absolute -top-8 -left-8 w-32 h-32 bg-gradient-to-r from-secondary/10 to-primary/10 rounded-full blur-lg\"></div>\n        <div class=\"absolute top-1/4 left-1/4 w-4 h-4 rounded-full bg-primary/30\"></div>\n        <div class=\"absolute bottom-1/3 right-1/3 w-3 h-3 rounded-full bg-secondary/30\"></div>\n\n        <!-- 空状态 -->\n        <div v-if=\"selectedClothes.length === 0\" class=\"text-center relative z-10\">\n          <div class=\"w-24 h-24 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center mx-auto mb-4 shadow-md border border-white/50\">\n            <font-awesome-icon icon=\"tshirt\" class=\"text-primary text-3xl\" />\n          </div>\n          <p class=\"text-neutral-600 font-medium\">从右侧添加衣物进行搭配</p>\n        </div>\n\n        <!-- 有衣物时的预览 -->\n        <div v-else class=\"w-full h-full flex flex-wrap justify-center items-center gap-3 md:gap-4 relative z-10 outfit-preview-area\"\n             @dragover.prevent=\"handleDragOver\"\n             @dragleave.prevent=\"handleDragLeave\"\n             @drop.prevent=\"handleDrop\">\n          <div v-for=\"(item, idx) in selectedClothes.slice(0, 8)\" :key=\"idx\"\n               class=\"relative group transform transition-all duration-500 hover:z-10 outfit-item\"\n               :class=\"idx >= 6 ? 'opacity-70 scale-95' : ''\"\n               :style=\"getItemStyle(idx, item)\"\n               :data-index=\"idx\"\n               @click=\"openImagePreview(item)\">\n            <div class=\"absolute -inset-1 bg-gradient-to-r from-primary/30 to-secondary/30 rounded-xl blur-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n            <img :src=\"item.img\" :alt=\"item.name\"\n                 class=\"w-16 h-16 md:w-20 md:h-20 rounded-xl object-cover shadow-lg border-2 border-white relative z-10 transition-transform duration-300 group-hover:scale-110\"\n                 loading=\"lazy\" />\n            <div v-if=\"idx === 7 && selectedClothes.length > 8\"\n                 class=\"absolute inset-0 bg-black/80 rounded-xl flex items-center justify-center text-white text-xs font-bold z-20\">\n              +{{ selectedClothes.length - 8 }}\n            </div>\n            <div class=\"absolute inset-x-0 -bottom-7 bg-black/80 backdrop-blur-sm text-white text-xs py-1 px-2 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none text-center truncate z-20 whitespace-nowrap shadow-lg\">\n              {{ item.name }}\n            </div>\n            <!-- 删除按钮 -->\n            <button class=\"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-red-500 flex items-center justify-center text-white shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-30 hover:bg-red-600 transform hover:scale-110\"\n                    @click.stop=\"removeItem(idx)\">\n              <font-awesome-icon :icon=\"['fas', 'times']\" class=\"text-xs\" />\n            </button>\n            <!-- 拖动手柄 -->\n            <div class=\"absolute top-1 left-1 w-5 h-5 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-move z-40\"\n                 @mousedown.stop=\"startDrag($event, idx)\">\n              <font-awesome-icon :icon=\"['fas', 'arrows-alt']\" class=\"text-neutral-600 text-xs\" />\n            </div>\n          </div>\n\n          <!-- 拖放提示 -->\n          <div v-if=\"isDragOver\" class=\"absolute inset-0 bg-primary/10 backdrop-blur-sm rounded-2xl flex items-center justify-center border-2 border-dashed border-primary z-20 animate-pulse\">\n            <div class=\"text-center p-6 bg-white/90 backdrop-blur rounded-xl shadow-lg\">\n              <font-awesome-icon :icon=\"['fas', 'tshirt']\" class=\"text-primary text-3xl mb-3\" />\n              <p class=\"text-primary font-medium\">拖放到此处添加到搭配</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- 图片预览模态框 -->\n        <teleport to=\"body\">\n          <div v-if=\"previewImage.show\" class=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\" @click=\"closeImagePreview\">\n            <div class=\"relative max-w-4xl max-h-[90vh] animate-fade-in\" @click.stop>\n              <img :src=\"previewImage.url\" :alt=\"previewImage.name\" class=\"max-w-full max-h-full object-contain rounded-xl shadow-2xl\" />\n              <div class=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6 rounded-b-xl\">\n                <h3 class=\"text-white text-xl font-bold mb-1\">{{ previewImage.name }}</h3>\n                <p class=\"text-white/80\">{{ previewImage.type }}</p>\n              </div>\n              <button class=\"absolute top-4 right-4 w-10 h-10 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/30 transition-colors\" @click=\"closeImagePreview\">\n                <font-awesome-icon :icon=\"['fas', 'times']\" />\n              </button>\n            </div>\n          </div>\n        </teleport>\n      </div>\n\n      <!-- 搭配信息表单 -->\n      <div class=\"bg-gradient-to-br from-white to-neutral-50 rounded-2xl p-5 mb-5 border border-neutral-100 shadow-sm\">\n        <h4 class=\"text-sm font-semibold text-neutral-700 mb-4 flex items-center\">\n          <div class=\"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center mr-2\">\n            <font-awesome-icon :icon=\"['fas', 'tag']\" class=\"text-primary text-xs\" />\n          </div>\n          搭配信息\n        </h4>\n        <div class=\"space-y-4\">\n          <div>\n            <label class=\"block text-xs font-medium text-neutral-600 mb-1.5\">搭配名称 <span class=\"text-red-500 font-bold ml-1\">*</span></label>\n            <div class=\"relative\">\n              <input\n                :value=\"outfitName\"\n                @input=\"$emit('update:outfitName', $event.target.value)\"\n                type=\"text\"\n                class=\"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary/30 focus:border-primary text-sm bg-white shadow-sm transition-all duration-300\"\n                placeholder=\"为你的搭配起个名字\"\n              />\n              <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n                <font-awesome-icon :icon=\"['fas', 'pen']\" class=\"text-neutral-400 text-xs\" />\n              </div>\n            </div>\n          </div>\n          <div>\n            <label class=\"block text-xs font-medium text-neutral-600 mb-1.5\">使用场景</label>\n            <div class=\"relative\">\n              <input\n                :value=\"outfitScene\"\n                @input=\"$emit('update:outfitScene', $event.target.value)\"\n                type=\"text\"\n                class=\"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary/30 focus:border-primary text-sm bg-white shadow-sm transition-all duration-300\"\n                placeholder=\"例如：日常通勤、约会、商务会议等\"\n              />\n              <div class=\"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none\">\n                <font-awesome-icon :icon=\"['fas', 'map-marker-alt']\" class=\"text-neutral-400 text-xs\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 衣物列表 -->\n      <div class=\"flex-1 flex flex-col\">\n        <div class=\"mb-3 flex justify-between items-center\">\n          <span class=\"text-sm font-semibold text-neutral-700\">衣物清单 ({{ selectedClothes.length }})</span>\n          <button v-if=\"selectedClothes.length > 0\" class=\"text-xs text-primary hover:text-primary/80 transition-colors flex items-center\" @click=\"$emit('reset-clothes')\">\n            <font-awesome-icon :icon=\"['fas', 'trash-alt']\" class=\"mr-1\" />\n            清空全部\n          </button>\n        </div>\n\n        <div class=\"h-40 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-neutral-200 scrollbar-track-transparent space-y-2.5\">\n          <div v-if=\"selectedClothes.length === 0\" class=\"text-center text-neutral-400 py-6 border-2 border-dashed border-neutral-200 rounded-xl bg-neutral-50/50\">\n            <font-awesome-icon :icon=\"['fas', 'info-circle']\" class=\"mr-2\" />\n            <p class=\"text-sm\">尚未选择衣物</p>\n          </div>\n          <div v-else v-for=\"(item, idx) in selectedClothes\" :key=\"idx\"\n               class=\"flex items-center gap-3 bg-white rounded-xl px-3 py-3 group hover:bg-primary/5 transition-all duration-300 transform hover:translate-x-1 border border-neutral-100 hover:border-primary/20 shadow-sm hover:shadow-md\">\n            <div class=\"relative\">\n              <div class=\"absolute -inset-1 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-lg blur-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n              <img :src=\"item.img\" :alt=\"item.name\" class=\"w-12 h-12 rounded-lg object-cover shadow-sm relative z-10\" loading=\"lazy\" />\n              <div class=\"absolute -top-1.5 -right-1.5 w-6 h-6 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center shadow-sm z-20\">\n                <span class=\"text-white text-xs font-bold\">{{ idx + 1 }}</span>\n              </div>\n            </div>\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-medium text-neutral-800 truncate\">{{ item.name }}</p>\n              <p class=\"text-xs text-neutral-500 truncate\">{{ item.type }}</p>\n            </div>\n            <button class=\"w-8 h-8 rounded-full bg-neutral-100 flex items-center justify-center text-neutral-400 hover:bg-red-500 hover:text-white transition-all duration-300 opacity-0 group-hover:opacity-100\"\n                    @click=\"$emit('remove-cloth', idx)\">\n              <font-awesome-icon :icon=\"['fas', 'times']\" class=\"text-xs\" />\n            </button>\n          </div>\n        </div>\n\n        <!-- 操作按钮 -->\n        <div class=\"mt-5 flex gap-3\">\n          <button class=\"flex-1 bg-gradient-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white font-medium py-3.5 rounded-xl transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-lg hover:shadow-xl flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none relative overflow-hidden group/button\"\n                  @click=\"handleSaveOutfit\"\n                  :disabled=\"selectedClothes.length === 0 || !outfitName.trim()\">\n            <!-- 按钮装饰效果 -->\n            <div class=\"absolute inset-0 bg-white/10 opacity-0 group-hover/button:opacity-100 transition-opacity duration-300\"></div>\n            <div class=\"absolute inset-0 bg-gradient-to-r from-primary/0 via-white/20 to-primary/0 transform -translate-x-full group-hover/button:translate-x-full transition-transform duration-700\"></div>\n\n            <font-awesome-icon :icon=\"['fas', 'heart']\" class=\"mr-2 transition-transform duration-300 group-hover/button:scale-110\" />\n            <span class=\"transition-transform duration-300 group-hover/button:scale-105 font-medium\">保存搭配</span>\n          </button>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, defineModel } from 'vue'\nimport { showToast } from '../../../utils/toast' \n\n// 搭配信息\nconst outfitName = defineModel('outfitName', { type: String, default: '' })\nconst outfitScene = defineModel('outfitScene', { type: String, default: '' })\n\n// 图片预览状态\nconst previewImage = ref({\n  show: false,\n  url: '',\n  name: '',\n  type: ''\n})\n\n// 拖放状态\nconst isDragOver = ref(false)\n\n// 衣物位置状态\nconst itemPositions = ref({})\n\n// 当前拖动的衣物索引\nconst draggingIndex = ref(-1)\n\n// 获取衣物样式\nfunction getItemStyle(idx, item) {\n  // 如果有保存的位置，使用保存的位置\n  if (itemPositions.value[idx]) {\n    const { x, y, rotation } = itemPositions.value[idx]\n    return {\n      transform: `translate(${x}px, ${y}px) rotate(${rotation}deg)`,\n      '--index': idx,\n      zIndex: draggingIndex.value === idx ? 20 : 10\n    }\n  }\n\n  // 否则使用默认位置\n  return {\n    transform: `translateY(${(idx % 3 - 1) * 10}px) rotate(${(idx % 2 === 0 ? -1 : 1) * (idx % 3)}deg)`,\n    '--index': idx,\n    zIndex: draggingIndex.value === idx ? 20 : 10\n  }\n}\n\n// 开始拖动\nfunction startDrag(event, idx) {\n  draggingIndex.value = idx\n\n  // 获取初始位置\n  const startX = event.clientX\n  const startY = event.clientY\n\n  // 获取当前位置\n  const currentPos = itemPositions.value[idx] || { \n    x: 0, \n    y: (idx % 3 - 1) * 10,\n    rotation: (idx % 2 === 0 ? -1 : 1) * (idx % 3)\n  }\n\n  // 鼠标移动处理函数\n  function handleMouseMove(e) {\n    const deltaX = e.clientX - startX\n    const deltaY = e.clientY - startY\n\n    // 更新位置\n    itemPositions.value[idx] = {\n      x: currentPos.x + deltaX,\n      y: currentPos.y + deltaY,\n      rotation: currentPos.rotation\n    }\n  }\n\n  // 鼠标释放处理函数\n  function handleMouseUp() {\n    document.removeEventListener('mousemove', handleMouseMove)\n    document.removeEventListener('mouseup', handleMouseUp)\n    draggingIndex.value = -1\n  }\n\n  // 添加事件监听\n  document.addEventListener('mousemove', handleMouseMove)\n  document.addEventListener('mouseup', handleMouseUp)\n\n  // 阻止默认行为\n  event.preventDefault()\n}\n\n// 打开图片预览\nfunction openImagePreview(item) {\n  previewImage.value = {\n    show: true,\n    url: item.img,\n    name: item.name,\n    type: item.type\n  }\n}\n\n// 关闭图片预览\nfunction closeImagePreview() {\n  previewImage.value.show = false\n}\n\n// 处理拖拽悬停\nfunction handleDragOver(event) {\n  // 阻止默认行为以允许放置\n  event.preventDefault()\n  isDragOver.value = true\n  event.currentTarget.classList.add('drag-over')\n}\n\n// 处理拖拽离开\nfunction handleDragLeave(event) {\n  // 只有当鼠标真正离开预览区域时才隐藏提示\n  // 检查相关目标是否是预览区域的子元素\n  if (!event.currentTarget.contains(event.relatedTarget)) {\n    isDragOver.value = false\n    event.currentTarget.classList.remove('drag-over')\n  }\n}\n\n// 处理拖放\nfunction handleDrop(event) {\n  // 阻止默认行为\n  event.preventDefault()\n\n  isDragOver.value = false\n  event.currentTarget.classList.remove('drag-over')\n\n  try {\n    // 获取拖拽的数据\n    const itemData = JSON.parse(event.dataTransfer.getData('text/plain'))\n\n    // 触发添加衣物事件\n    emit('add-cloth', itemData)\n\n    // 添加成功反馈\n    showToast('已添加到搭配', 'success')\n  } catch (error) {\n    console.error('处理拖放数据失败:', error)\n    showToast('添加失败，请重试', 'error')\n  }\n}\n\n// 定义emit\nconst emit = defineEmits([\n  'remove-cloth',\n  'reset-clothes',\n  'save-outfit',\n  'add-cloth'\n])\n\n// 处理保存搭配\nfunction handleSaveOutfit() {\n  if (!outfitName.value.trim()) {\n    alert('请输入搭配名称')\n    return\n  }\n\n  emit('save-outfit', {\n    name: outfitName.value,\n    scene: outfitScene.value\n  })\n}\n\n// 移除衣物\nfunction removeItem(index) {\n  emit('remove-cloth', index)\n  showToast('已从搭配中移除', 'info')\n}\n\ndefineProps({\n  selectedClothes: {\n    type: Array,\n    default: () => []\n  }\n})\n</script>\n\n<style scoped>\n/* 自定义滚动条样式 */\n.scrollbar-thin::-webkit-scrollbar {\n  width: 4px;\n}\n\n.scrollbar-thin::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.scrollbar-thin::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n}\n\n.scrollbar-thin::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.2);\n}\n\n/* 搭配预览动画 */\n@keyframes outfit-float {\n  0%, 100% {\n    transform: translateY(0) rotate(0deg);\n  }\n  50% {\n    transform: translateY(-10px) rotate(2deg);\n  }\n}\n\n.outfit-item {\n  animation: outfit-float 4s ease-in-out infinite;\n  animation-delay: calc(var(--index) * 0.2s);\n}\n\n.outfit-item:nth-child(odd) {\n  animation-direction: alternate;\n}\n\n/* 图片预览动画 */\n@keyframes fade-in {\n  from {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n.animate-fade-in {\n  animation: fade-in 0.3s ease-out forwards;\n}\n\n/* 拖放区域样式 */\n.outfit-preview-area {\n  position: relative;\n  transition: all 0.3s ease;\n}\n\n.outfit-preview-area.drag-over {\n  background-color: rgba(99, 102, 241, 0.1);\n  border: 2px dashed #6366f1;\n  border-radius: 1rem;\n  transform: scale(1.02);\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}