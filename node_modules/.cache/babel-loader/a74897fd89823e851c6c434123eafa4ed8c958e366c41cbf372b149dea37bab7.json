{"ast":null,"code":"// Stores 入口文件 - 统一导出所有 store\nexport { useAnalyticsStore } from './analyticsStore';\nexport { useClothingStore } from './clothingStore';\nexport { useOutfitStore } from './outfitStore';\nexport { useUserStore } from './userStore';\nexport { useUiStore } from './uiStore';\nexport { useWeatherStore } from './weatherStore';\n// 注意：wardrobeStore已被clothingStore替代，保留兼容导出\n\n// 创建 store 初始化函数\nexport const initializeStores = async () => {\n  try {\n    // 按需初始化核心 store\n    const {\n      useUserStore\n    } = await import('./userStore');\n    const {\n      useUiStore\n    } = await import('./uiStore');\n    const userStore = useUserStore();\n    const uiStore = useUiStore();\n\n    // 初始化用户偏好设置\n    await userStore.initializeUser();\n\n    // 设置 UI 主题\n    uiStore.setTheme(userStore.preferences.colorScheme);\n    console.log('✅ 所有 store 初始化完成');\n  } catch (error) {\n    console.error('❌ Store 初始化失败:', error);\n  }\n};\n\n// 创建批量刷新函数\nexport const refreshAllStores = async () => {\n  const promises = [];\n  try {\n    const {\n      useClothingStore\n    } = await import('./clothingStore');\n    const {\n      useAnalyticsStore\n    } = await import('./analyticsStore');\n    const {\n      useWeatherStore\n    } = await import('./weatherStore');\n    const clothingStore = useClothingStore();\n    const analyticsStore = useAnalyticsStore();\n    const weatherStore = useWeatherStore();\n\n    // 并行刷新数据\n    promises.push(clothingStore.refreshData?.(), analyticsStore.refreshAllData?.(), weatherStore.refreshWeatherData?.());\n    await Promise.all(promises);\n    console.log('🔄 所有数据刷新完成');\n  } catch (error) {\n    console.error('❌ 数据刷新失败:', error);\n  }\n};\n\n// 创建 store 清理函数\nexport const cleanupStores = () => {\n  // 清理缓存数据\n  localStorage.removeItem('wardrobe-cache');\n  sessionStorage.removeItem('ui-state');\n  console.log('🧹 Store 清理完成');\n};\n\n// 导出 store 工具函数\nexport const storeUtils = {\n  // 防抖刷新\n  debounceRefresh: (delay = 1000) => {\n    let timeoutId;\n    return () => {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(refreshAllStores, delay);\n    };\n  },\n  // 错误处理\n  handleStoreError: (error, storeName) => {\n    console.error(`${storeName} 错误:`, error);\n    // 可以集成错误上报服务\n    if (window.errorReporter) {\n      window.errorReporter.report(error, {\n        store: storeName\n      });\n    }\n  },\n  // 性能监控\n  measureStoreAction: async (actionName, actionFn) => {\n    const start = performance.now();\n    try {\n      const result = await actionFn();\n      const duration = performance.now() - start;\n      console.log(`${actionName} 耗时: ${duration.toFixed(2)}ms`);\n      return result;\n    } catch (error) {\n      const duration = performance.now() - start;\n      console.error(`${actionName} 失败 (${duration.toFixed(2)}ms):`, error);\n      throw error;\n    }\n  }\n};","map":{"version":3,"names":["useAnalyticsStore","useClothingStore","useOutfitStore","useUserStore","useUiStore","useWeatherStore","initializeStores","userStore","uiStore","initializeUser","setTheme","preferences","colorScheme","console","log","error","refreshAllStores","promises","clothingStore","analyticsStore","weatherStore","push","refreshData","refreshAllData","refreshWeatherData","Promise","all","cleanupStores","localStorage","removeItem","sessionStorage","storeUtils","debounceRefresh","delay","timeoutId","clearTimeout","setTimeout","handleStoreError","storeName","window","errorReporter","report","store","measureStoreAction","actionName","actionFn","start","performance","now","result","duration","toFixed"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/stores/index.js"],"sourcesContent":["// Stores 入口文件 - 统一导出所有 store\nexport { useAnalyticsStore } from './analyticsStore';\nexport { useClothingStore } from './clothingStore';\nexport { useOutfitStore } from './outfitStore';\nexport { useUserStore } from './userStore';\nexport { useUiStore } from './uiStore';\nexport { useWeatherStore } from './weatherStore';\n// 注意：wardrobeStore已被clothingStore替代，保留兼容导出\n\n// 创建 store 初始化函数\nexport const initializeStores = async () => {\n  try {\n    // 按需初始化核心 store\n    const { useUserStore } = await import('./userStore');\n    const { useUiStore } = await import('./uiStore');\n\n    const userStore = useUserStore();\n    const uiStore = useUiStore();\n\n    // 初始化用户偏好设置\n    await userStore.initializeUser();\n\n    // 设置 UI 主题\n    uiStore.setTheme(userStore.preferences.colorScheme);\n\n    console.log('✅ 所有 store 初始化完成');\n  } catch (error) {\n    console.error('❌ Store 初始化失败:', error);\n  }\n};\n\n// 创建批量刷新函数\nexport const refreshAllStores = async () => {\n  const promises = [];\n\n  try {\n    const { useClothingStore } = await import('./clothingStore');\n    const { useAnalyticsStore } = await import('./analyticsStore');\n    const { useWeatherStore } = await import('./weatherStore');\n\n    const clothingStore = useClothingStore();\n    const analyticsStore = useAnalyticsStore();\n    const weatherStore = useWeatherStore();\n\n    // 并行刷新数据\n    promises.push(\n      clothingStore.refreshData?.(),\n      analyticsStore.refreshAllData?.(),\n      weatherStore.refreshWeatherData?.()\n    );\n\n    await Promise.all(promises);\n    console.log('🔄 所有数据刷新完成');\n  } catch (error) {\n    console.error('❌ 数据刷新失败:', error);\n  }\n};\n\n// 创建 store 清理函数\nexport const cleanupStores = () => {\n  // 清理缓存数据\n  localStorage.removeItem('wardrobe-cache');\n  sessionStorage.removeItem('ui-state');\n  console.log('🧹 Store 清理完成');\n};\n\n// 导出 store 工具函数\nexport const storeUtils = {\n  // 防抖刷新\n  debounceRefresh: (delay = 1000) => {\n    let timeoutId;\n    return () => {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(refreshAllStores, delay);\n    };\n  },\n\n  // 错误处理\n  handleStoreError: (error, storeName) => {\n    console.error(`${storeName} 错误:`, error);\n    // 可以集成错误上报服务\n    if (window.errorReporter) {\n      window.errorReporter.report(error, { store: storeName });\n    }\n  },\n\n  // 性能监控\n  measureStoreAction: async (actionName, actionFn) => {\n    const start = performance.now();\n    try {\n      const result = await actionFn();\n      const duration = performance.now() - start;\n      console.log(`${actionName} 耗时: ${duration.toFixed(2)}ms`);\n      return result;\n    } catch (error) {\n      const duration = performance.now() - start;\n      console.error(`${actionName} 失败 (${duration.toFixed(2)}ms):`, error);\n      throw error;\n    }\n  },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}