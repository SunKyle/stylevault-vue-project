{"ast":null,"code":"function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createVNode as _createVNode, Fragment as _Fragment, toDisplayString as _toDisplayString, renderList as _renderList } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"group relative\"\n};\nvar _hoisted_2 = {\n  key: 0,\n  \"class\": \"absolute inset-0 bg-gray-100 flex items-center justify-center\"\n};\nvar _hoisted_3 = [\"src\", \"data-src\", \"alt\"];\nvar _hoisted_4 = {\n  key: 1,\n  \"class\": \"absolute inset-0 bg-gradient-to-br from-black/70 via-black/50 to-black/70 opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center rounded-xl backdrop-blur-sm\"\n};\nvar _hoisted_5 = {\n  \"class\": \"w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center hover:bg-primary-dark transition-colors shadow-md transform scale-90 group-hover:scale-100 transition-transform\"\n};\nvar _hoisted_6 = {\n  \"class\": \"px-1\"\n};\nvar _hoisted_7 = {\n  \"class\": \"font-medium truncate text-sm\"\n};\nvar _hoisted_8 = {\n  \"class\": \"text-xs text-neutral-500 mt-1\"\n};\nvar _hoisted_9 = {\n  key: 0,\n  \"class\": \"flex flex-wrap gap-1 mt-1\"\n};\nvar _hoisted_10 = {\n  key: 0,\n  \"class\": \"absolute top-3 right-3 flex flex-col gap-2 z-10\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    \"class\": _normalizeClass([\"aspect-square bg-white rounded-xl overflow-hidden shadow-soft hover:shadow-lg transition-all duration-300 mb-3 border-2 border-transparent hover:border-primary/30\", {\n      'border-primary/50 shadow-lg': $props.item.favorite\n    }])\n  }, [_createCommentVNode(\" 加载状态占位符 \"), !$setup.isLoaded ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toConsumableArray(_cache[3] || (_cache[3] = [_createElementVNode(\"div\", {\n    \"class\": \"w-8 h-8 border-4 border-gray-200 border-t-primary rounded-full animate-spin\"\n  }, null, -1 /* CACHED */)])))) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"img\", {\n    src: $setup.isLoaded ? $props.item.image : $setup.placeholderImage,\n    \"data-src\": $props.item.image,\n    ref: \"imageRef\",\n    alt: $props.item.name,\n    \"class\": _normalizeClass([\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\", {\n      'opacity-0': !$setup.isLoaded\n    }])\n  }, null, 10 /* CLASS, PROPS */, _hoisted_3), _createCommentVNode(\" 收藏区域特有的取消收藏按钮 \"), $props.showInFavoriteMode ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    \"class\": \"px-4 py-2 bg-primary text-white text-sm rounded-full flex items-center space-x-1 hover:bg-primary-dark transition-colors shadow-lg transform scale-95 group-hover:scale-100 transition-transform duration-300\",\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return _ctx.$emit('like', $props.item);\n    })\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'heart-broken']\n  }), _cache[4] || (_cache[4] = _createElementVNode(\"span\", null, \"取消收藏\", -1 /* CACHED */))])])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" 非收藏区域的添加按钮 \"), _createElementVNode(\"div\", {\n    \"class\": _normalizeClass([\"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center pb-4 rounded-xl\", {\n      'hidden': $props.item.favorite\n    }])\n  }, [_createElementVNode(\"button\", _hoisted_5, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'plus']\n  })])], 2 /* CLASS */)], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))], 2 /* CLASS */), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h4\", _hoisted_7, _toDisplayString($props.item.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_8, _toDisplayString($props.item.category) + \" · \" + _toDisplayString($props.item.style), 1 /* TEXT */), _createCommentVNode(\" 季节信息 \"), $props.item.seasons && $props.item.seasons.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.item.seasons, function (season) {\n    return _openBlock(), _createElementBlock(\"span\", {\n      key: season,\n      \"class\": \"text-xs px-1.5 py-0.5 rounded-full bg-primary/10 text-primary\"\n    }, _toDisplayString(season), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 非收藏区域显示的按钮组 \"), !$props.showInFavoriteMode ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createCommentVNode(\" 爱心按钮 \"), _createElementVNode(\"button\", {\n    \"class\": _normalizeClass([\"w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 shadow-md\", $props.item.favorite ? 'bg-primary text-white animate-pulse-once' : 'bg-white/90 backdrop-blur text-neutral-400 hover:text-primary hover:bg-white']),\n    onClick: _cache[1] || (_cache[1] = function ($event) {\n      return _ctx.$emit('like', $props.item);\n    })\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: $props.item.favorite ? ['fas', 'heart'] : ['far', 'heart'],\n    \"class\": \"text-sm\"\n  }, null, 8 /* PROPS */, [\"icon\"])], 2 /* CLASS */), _createCommentVNode(\" 详细信息按钮 \"), _createElementVNode(\"button\", {\n    \"class\": \"w-8 h-8 rounded-full bg-white/90 backdrop-blur text-neutral-400 hover:text-primary hover:bg-white flex items-center justify-center transition-all duration-300 shadow-md\",\n    onClick: _cache[2] || (_cache[2] = function ($event) {\n      return _ctx.$emit('viewDetail', $props.item);\n    })\n  }, [_createVNode(_component_font_awesome_icon, {\n    icon: ['fas', 'info'],\n    \"class\": \"text-sm\"\n  })])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_normalizeClass","$props","item","favorite","_createCommentVNode","$setup","isLoaded","_hoisted_2","_toConsumableArray","_cache","src","image","placeholderImage","ref","alt","name","showInFavoriteMode","_hoisted_4","onClick","$event","_ctx","$emit","_createVNode","_component_font_awesome_icon","icon","_Fragment","key","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","category","style","seasons","length","_hoisted_9","_renderList","season","_hoisted_10"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/components/common/ui/ClothingItem.vue"],"sourcesContent":["<template>\n<div class=\"group relative\">\n  <div class=\"aspect-square bg-white rounded-xl overflow-hidden shadow-soft hover:shadow-lg transition-all duration-300 mb-3 border-2 border-transparent hover:border-primary/30\" :class=\"{ 'border-primary/50 shadow-lg': item.favorite }\">\n    <!-- 加载状态占位符 -->\n    <div v-if=\"!isLoaded\" class=\"absolute inset-0 bg-gray-100 flex items-center justify-center\">\n      <div class=\"w-8 h-8 border-4 border-gray-200 border-t-primary rounded-full animate-spin\"></div>\n    </div>\n    \n    <img \n      :src=\"isLoaded ? item.image : placeholderImage\"\n      :data-src=\"item.image\"\n      ref=\"imageRef\"\n      :alt=\"item.name\" \n      class=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n      :class=\"{ 'opacity-0': !isLoaded }\"\n    >\n    \n    <!-- 收藏区域特有的取消收藏按钮 -->\n    <div v-if=\"showInFavoriteMode\" class=\"absolute inset-0 bg-gradient-to-br from-black/70 via-black/50 to-black/70 opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center rounded-xl backdrop-blur-sm\">\n      <button \n        class=\"px-4 py-2 bg-primary text-white text-sm rounded-full flex items-center space-x-1 hover:bg-primary-dark transition-colors shadow-lg transform scale-95 group-hover:scale-100 transition-transform duration-300\"\n        @click=\"$emit('like', item)\"\n      >\n        <font-awesome-icon :icon=\"['fas', 'heart-broken']\" />\n        <span>取消收藏</span>\n      </button>\n    </div>\n    \n    <!-- 非收藏区域的添加按钮 -->\n    <div v-else class=\"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center pb-4 rounded-xl\" :class=\"{ 'hidden': item.favorite }\">\n      <button class=\"w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center hover:bg-primary-dark transition-colors shadow-md transform scale-90 group-hover:scale-100 transition-transform\">\n        <font-awesome-icon :icon=\"['fas', 'plus']\" />\n      </button>\n    </div>\n  </div>\n  <div class=\"px-1\">\n    <h4 class=\"font-medium truncate text-sm\">{{ item.name }}</h4>\n    <p class=\"text-xs text-neutral-500 mt-1\">{{ item.category }} · {{ item.style }}</p>\n    <!-- 季节信息 -->\n    <div class=\"flex flex-wrap gap-1 mt-1\" v-if=\"item.seasons && item.seasons.length > 0\">\n      <span v-for=\"season in item.seasons\" :key=\"season\" class=\"text-xs px-1.5 py-0.5 rounded-full bg-primary/10 text-primary\">\n        {{ season }}\n      </span>\n    </div>\n  </div>\n  \n  <!-- 非收藏区域显示的按钮组 -->\n  <div v-if=\"!showInFavoriteMode\" class=\"absolute top-3 right-3 flex flex-col gap-2 z-10\">\n    <!-- 爱心按钮 -->\n    <button\n      class=\"w-8 h-8 rounded-full flex items-center justify-center transition-all duration-300 shadow-md\"\n      :class=\"item.favorite ? 'bg-primary text-white animate-pulse-once' : 'bg-white/90 backdrop-blur text-neutral-400 hover:text-primary hover:bg-white'\"\n      @click=\"$emit('like', item)\"\n    >\n      <font-awesome-icon :icon=\"item.favorite ? ['fas', 'heart'] : ['far', 'heart']\" class=\"text-sm\" />\n    </button>\n    <!-- 详细信息按钮 -->\n    <button\n      class=\"w-8 h-8 rounded-full bg-white/90 backdrop-blur text-neutral-400 hover:text-primary hover:bg-white flex items-center justify-center transition-all duration-300 shadow-md\"\n      @click=\"$emit('viewDetail', item)\"\n    >\n      <font-awesome-icon :icon=\"['fas', 'info']\" class=\"text-sm\" />\n    </button>\n  </div>\n</div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue'\n\ndefineProps({\n  item: {\n    type: Object,\n    required: true\n  },\n  showInFavoriteMode: {\n    type: Boolean,\n    default: false\n  }\n})\n\ndefineEmits(['like', 'viewDetail'])\n\n// 懒加载相关状态\nconst isLoaded = ref(false)\nconst imageRef = ref(null)\nconst observer = ref(null)\n\n// 占位图片（一个简单的SVG占位符）\nconst placeholderImage = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2Y4ZjhmOCIvPgogIDxwYXRoIGQ9Ik0gNTAwIDUwIEwgMTAwIDEwMCBMIDUwIDUwMCBMIDUwMCA5MDAgTCA5MDAgNTAwIEwgOTUwIDEwMCBaIiBzdHJva2U9IiNmMGYwZjAiIHN0cm9rZS13aWR0aD0iMTAiLz4KPC9zdmc+';\n\n// 图片懒加载处理函数\nconst loadImage = () => {\n  if (imageRef.value && item.image) {\n    const img = new Image();\n    img.src = item.image;\n    \n    // 图片加载完成后更新状态\n    img.onload = () => {\n      isLoaded.value = true;\n      // 加载完成后取消观察\n      if (observer.value) {\n        observer.value.unobserve(imageRef.value);\n      }\n    };\n    \n    // 加载失败时也标记为已加载，避免一直显示加载动画\n    img.onerror = () => {\n      isLoaded.value = true;\n    };\n  }\n};\n\n// 初始化Intersection Observer\nonMounted(() => {\n  // 检查浏览器是否支持Intersection Observer\n  if ('IntersectionObserver' in window && imageRef.value) {\n    // 创建观察器，当元素进入视口时触发\n    observer.value = new IntersectionObserver((entries) => {\n      if (entries[0].isIntersecting && !isLoaded.value) {\n        loadImage();\n      }\n    }, {\n      // 设置根边距，提前50px开始加载\n      rootMargin: '50px',\n      threshold: 0.1\n    });\n    \n    // 开始观察图片元素\n    observer.value.observe(imageRef.value);\n  } else {\n    // 不支持Intersection Observer的浏览器直接加载图片\n    loadImage();\n  }\n});\n\n// 组件卸载时清理观察器\nonUnmounted(() => {\n  if (observer.value && imageRef.value) {\n    observer.value.unobserve(imageRef.value);\n  }\n});\n\n// 季节信息现在统一使用seasons数组，无需格式化\n</script>\n\n<style scoped>\n@keyframes pulse-once {\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.2);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n.animate-pulse-once {\n  animation: pulse-once 0.3s ease-in-out;\n}\n\n/* 图片淡入动画 */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\nimg:not(.opacity-0) {\n  animation: fadeIn 0.5s ease-out;\n}\n\n/* 加载动画 */\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.animate-spin {\n  animation: spin 1s linear infinite;\n}\n\n/* 性能优化：硬件加速 */\n.aspect-square {\n  transform: translateZ(0);\n  backface-visibility: hidden;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}