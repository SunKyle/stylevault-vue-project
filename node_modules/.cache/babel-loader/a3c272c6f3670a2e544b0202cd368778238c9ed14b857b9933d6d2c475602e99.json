{"ast":null,"code":"function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _iterableToArray(r) { if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r); }\nfunction _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, vShow as _vShow, createVNode as _createVNode, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode } from \"vue\";\nvar _hoisted_1 = {\n  \"class\": \"py-10\"\n};\nvar _hoisted_2 = {\n  \"class\": \"container mx-auto px-4\"\n};\nvar _hoisted_3 = {\n  key: 0,\n  \"class\": \"flex justify-center items-center py-20\"\n};\nvar _hoisted_4 = {\n  \"class\": \"text-center py-20\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 加载状态 \"), $setup.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toConsumableArray(_cache[5] || (_cache[5] = [_createElementVNode(\"div\", {\n    \"class\": \"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"\n  }, null, -1 /* CACHED */), _createElementVNode(\"span\", {\n    \"class\": \"ml-3 text-gray-600\"\n  }, \"加载搭配灵感中...\", -1 /* CACHED */)])))) : !$setup.isLoading && $setup.savedOutfits.length === 0 && $setup.clothes.length === 0 ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" 空状态 \"), _createElementVNode(\"div\", _hoisted_4, [_cache[6] || (_cache[6] = _createStaticVNode(\"<div class=\\\"text-gray-400 mb-4\\\" data-v-2c3a4a10><svg class=\\\"w-24 h-24 mx-auto\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" viewBox=\\\"0 0 24 24\\\" data-v-2c3a4a10><path stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"2\\\" d=\\\"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 011 1v1a1 1 0 01-1 1h-1v12a2 2 0 01-2 2H5a2 2 0 01-2-2V7H2a1 1 0 01-1-1V5a1 1 0 011-1h4zM9 3v1h6V3H9zm6 3H9v12h6V6z\\\" data-v-2c3a4a10></path></svg></div><h3 class=\\\"text-lg font-medium text-gray-900 mb-2\\\" data-v-2c3a4a10>暂无搭配灵感</h3><p class=\\\"text-gray-600 mb-4\\\" data-v-2c3a4a10>先添加一些衣物，然后开始创建你的第一个搭配吧！</p>\", 3)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return _ctx.$router.push('/upload');\n    }),\n    \"class\": \"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700\"\n  }, \" 添加衣物 \")])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" 主要内容 \"), _createElementVNode(\"div\", null, [_createCommentVNode(\" 已保存搭配展示区域 \"), _withDirectives(_createVNode($setup[\"SavedOutfits\"], {\n    savedOutfits: $setup.savedOutfits,\n    currentPage: $setup.currentPage,\n    itemsPerPage: $setup.itemsPerPage,\n    totalPages: $setup.totalPages,\n    currentPageOutfits: $setup.currentPageOutfits,\n    isLoading: $setup.isLoading,\n    onLoadOutfit: $setup.loadOutfit,\n    onDeleteOutfit: $setup.deleteOutfit,\n    onShareOutfit: $setup.shareOutfit,\n    onPageChange: _cache[1] || (_cache[1] = function ($event) {\n      return $setup.currentPage = $event;\n    }),\n    onScrollToCreate: $setup.scrollToCreateSection\n  }, null, 8 /* PROPS */, [\"savedOutfits\", \"currentPage\", \"itemsPerPage\", \"totalPages\", \"currentPageOutfits\", \"isLoading\"]), [[_vShow, $setup.savedOutfits.length > 0]]), _createCommentVNode(\" 创建搭配区域 \"), _withDirectives(_createVNode($setup[\"OutfitCreator\"], {\n    selectedClothes: $setup.selectedClothes,\n    clothes: $setup.clothes,\n    categories: $setup.categories,\n    tags: $setup.tags,\n    activeCategory: $setup.activeCategory,\n    activeTag: $setup.activeTag,\n    filteredClothes: $setup.filteredClothes,\n    isLoading: $setup.isLoading,\n    onToggleCloth: $setup.toggleCloth,\n    onRemoveCloth: $setup.removeCloth,\n    onResetClothes: $setup.resetClothes,\n    onSaveOutfit: $setup.saveOutfit,\n    onCategoryChange: _cache[2] || (_cache[2] = function ($event) {\n      return $setup.activeCategory = $event;\n    }),\n    onTagChange: _cache[3] || (_cache[3] = function ($event) {\n      return $setup.activeTag = $event;\n    }),\n    onResetFilters: _cache[4] || (_cache[4] = function ($event) {\n      $setup.activeCategory = '全部';\n      $setup.activeTag = '';\n    })\n  }, null, 8 /* PROPS */, [\"selectedClothes\", \"clothes\", \"categories\", \"tags\", \"activeCategory\", \"activeTag\", \"filteredClothes\", \"isLoading\"]), [[_vShow, $setup.clothes.length > 0]])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))])]);\n}","map":{"version":3,"names":["_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","$setup","isLoading","_hoisted_3","_toConsumableArray","_cache","savedOutfits","length","clothes","_Fragment","key","_hoisted_4","onClick","$event","_ctx","$router","push","_createVNode","currentPage","itemsPerPage","totalPages","currentPageOutfits","onLoadOutfit","loadOutfit","onDeleteOutfit","deleteOutfit","onShareOutfit","shareOutfit","onPageChange","onScrollToCreate","scrollToCreateSection","selectedClothes","categories","tags","activeCategory","activeTag","filteredClothes","onToggleCloth","toggleCloth","onRemoveCloth","removeCloth","onResetClothes","resetClothes","onSaveOutfit","saveOutfit","onCategoryChange","onTagChange","onResetFilters"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/components/inspiration/InspirationSection.vue"],"sourcesContent":["<template>\n  <section class=\"py-10\">\n    <div class=\"container mx-auto px-4\">\n      <!-- 加载状态 -->\n      <div v-if=\"isLoading\" class=\"flex justify-center items-center py-20\">\n        <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\n        <span class=\"ml-3 text-gray-600\">加载搭配灵感中...</span>\n      </div>\n\n      <!-- 空状态 -->\n      <div\n        v-else-if=\"!isLoading && savedOutfits.length === 0 && clothes.length === 0\"\n        class=\"text-center py-20\"\n      >\n        <div class=\"text-gray-400 mb-4\">\n          <svg class=\"w-24 h-24 mx-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"2\"\n              d=\"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 011 1v1a1 1 0 01-1 1h-1v12a2 2 0 01-2 2H5a2 2 0 01-2-2V7H2a1 1 0 01-1-1V5a1 1 0 011-1h4zM9 3v1h6V3H9zm6 3H9v12h6V6z\"\n            ></path>\n          </svg>\n        </div>\n        <h3 class=\"text-lg font-medium text-gray-900 mb-2\">暂无搭配灵感</h3>\n        <p class=\"text-gray-600 mb-4\">先添加一些衣物，然后开始创建你的第一个搭配吧！</p>\n        <button\n          @click=\"$router.push('/upload')\"\n          class=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700\"\n        >\n          添加衣物\n        </button>\n      </div>\n\n      <!-- 主要内容 -->\n      <div v-else>\n        <!-- 已保存搭配展示区域 -->\n        <SavedOutfits\n          v-show=\"savedOutfits.length > 0\"\n          :savedOutfits=\"savedOutfits\"\n          :currentPage=\"currentPage\"\n          :itemsPerPage=\"itemsPerPage\"\n          :totalPages=\"totalPages\"\n          :currentPageOutfits=\"currentPageOutfits\"\n          :isLoading=\"isLoading\"\n          @load-outfit=\"loadOutfit\"\n          @delete-outfit=\"deleteOutfit\"\n          @share-outfit=\"shareOutfit\"\n          @page-change=\"currentPage = $event\"\n          @scroll-to-create=\"scrollToCreateSection\"\n        />\n\n        <!-- 创建搭配区域 -->\n        <OutfitCreator\n          v-show=\"clothes.length > 0\"\n          :selectedClothes=\"selectedClothes\"\n          :clothes=\"clothes\"\n          :categories=\"categories\"\n          :tags=\"tags\"\n          :activeCategory=\"activeCategory\"\n          :activeTag=\"activeTag\"\n          :filteredClothes=\"filteredClothes\"\n          :isLoading=\"isLoading\"\n          @toggle-cloth=\"toggleCloth\"\n          @remove-cloth=\"removeCloth\"\n          @reset-clothes=\"resetClothes\"\n          @save-outfit=\"saveOutfit\"\n          @category-change=\"activeCategory = $event\"\n          @tag-change=\"activeTag = $event\"\n          @reset-filters=\"\n            activeCategory = '全部';\n            activeTag = '';\n          \"\n        />\n      </div>\n    </div>\n  </section>\n</template>\n\n<script setup>\n  import { ref, computed, onMounted, watch } from 'vue';\n  import { useClothingStore } from '@/stores';\n  import { useOutfitStore } from '../../stores/outfitStore';\n  import { scenesMockData } from '../../mock/data';\n  import { wardrobeAPI } from '../../mock/wardrobe';\n  import SavedOutfits from './SavedOutfits.vue';\n  import OutfitCreator from './OutfitCreator.vue';\n\n  const clothingStore = useClothingStore();\n  const outfitStore = useOutfitStore();\n  const categories = computed(() => ['全部', ...clothingStore.categories.map(c => c.name)]);\n\n  // 分页相关数据\n  const currentPage = ref(1);\n  const itemsPerPage = ref(4);\n  const isLoading = ref(true);\n\n  // 从store获取数据\n  const clothes = ref([]);\n  const savedOutfits = computed(() => outfitStore.allOutfits);\n\n  // 监听clothingItems变化\n  watch(\n    () => clothingStore.clothingItems,\n    newItems => {\n      if (newItems.length > 0) {\n        clothes.value = wardrobeAPI.getClothesWithTags(newItems);\n      }\n    },\n    { immediate: true }\n  );\n\n  // 获取标签\n  const allTags = computed(() => {\n    const tagSet = new Set();\n    clothes.value.forEach(item => {\n      item.tags?.forEach(tag => tagSet.add(tag));\n    });\n    return Array.from(tagSet);\n  });\n\n  const tags = computed(() => ['最近穿着', ...allTags.value]);\n  const activeCategory = ref('全部');\n  const activeTag = ref('');\n  const selectedClothes = ref([]);\n\n  // 计算分页数据\n  const currentPageOutfits = computed(() => {\n    const start = (currentPage.value - 1) * itemsPerPage.value;\n    const end = start + itemsPerPage.value;\n    return savedOutfits.value.slice(start, end);\n  });\n\n  const totalPages = computed(() => {\n    return Math.ceil(savedOutfits.value.length / itemsPerPage.value);\n  });\n\n  // 组件挂载时初始化数据\n  onMounted(async () => {\n    await outfitStore.fetchOutfits();\n    isLoading.value = false;\n\n    // 异步加载其他数据\n    Promise.all([\n      clothingStore.categories.length === 0 ? clothingStore.fetchCategories() : Promise.resolve(),\n      clothingStore.clothingItems.length === 0\n        ? clothingStore.fetchClothingItems()\n        : Promise.resolve(),\n    ]).catch(error => {\n      console.error('加载数据失败:', error);\n    });\n  });\n\n  const filteredClothes = computed(() => {\n    return clothes.value.filter(item => {\n      const catMatch = activeCategory.value === '全部' || item.category === activeCategory.value;\n      const tagMatch = !activeTag.value || item.tags.includes(activeTag.value);\n      return catMatch && tagMatch;\n    });\n  });\n\n  // 操作方法\n  function toggleCloth(item) {\n    const index = selectedClothes.value.findIndex(i => i.name === item.name);\n    if (index === -1) {\n      selectedClothes.value.push(item);\n    } else {\n      selectedClothes.value.splice(index, 1);\n    }\n  }\n\n  function removeCloth(idx) {\n    selectedClothes.value.splice(idx, 1);\n  }\n\n  function resetClothes() {\n    selectedClothes.value = [];\n  }\n\n  function scrollToCreateSection() {\n    const element = document.getElementById('create-section');\n    if (element) {\n      element.scrollIntoView({ behavior: 'smooth' });\n    }\n  }\n\n  // 使用store的方法替代直接localStorage操作\n  async function saveOutfit(outfitInfo) {\n    if (selectedClothes.value.length === 0) {\n      alert('请至少选择一件衣物');\n      return;\n    }\n\n    const newOutfit = {\n      name: outfitInfo.name,\n      scene: outfitInfo.scene || undefined,\n      items: [...selectedClothes.value],\n      createdAt: new Date(),\n    };\n\n    try {\n      await outfitStore.addOutfit(newOutfit);\n      alert('穿搭方案已保存！');\n      resetClothes();\n    } catch (error) {\n      console.error('保存搭配失败:', error);\n      alert('保存失败，请重试');\n    }\n  }\n\n  function loadOutfit(outfit) {\n    selectedClothes.value = Array.isArray(outfit.items) ? [...outfit.items] : [];\n  }\n\n  async function deleteOutfit(outfit) {\n    if (confirm('确定要删除这个搭配方案吗？')) {\n      try {\n        await outfitStore.removeOutfit(outfit.id);\n      } catch (error) {\n        console.error('删除搭配失败:', error);\n        alert('删除失败，请重试');\n      }\n    }\n  }\n\n  function shareOutfit(outfit) {\n    // 使用store的分享功能\n    outfitStore.shareOutfit(outfit);\n  }\n</script>\n\n<style scoped>\n  .inspiration-container {\n    min-height: 100vh;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  }\n\n  .loading-spinner {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 200px;\n  }\n\n  .empty-state {\n    text-align: center;\n    padding: 60px 20px;\n    color: #6b7280;\n  }\n\n  .fade-enter-active,\n  .fade-leave-active {\n    transition: opacity 0.3s ease;\n  }\n\n  .fade-enter-from,\n  .fade-leave-to {\n    opacity: 0;\n  }\n\n  @media (max-width: 768px) {\n    .inspiration-container {\n      padding: 1rem;\n    }\n  }\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}