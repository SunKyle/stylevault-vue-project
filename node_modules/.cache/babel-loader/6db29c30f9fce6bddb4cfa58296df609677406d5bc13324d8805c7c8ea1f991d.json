{"ast":null,"code":"import { ref, onErrorCaptured } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'ErrorBoundary',\n  props: {\n    fallback: {\n      type: String,\n      \"default\": '页面加载失败，请稍后重试'\n    }\n  },\n  emits: ['error', 'reset'],\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose,\n      __emit = _ref.emit;\n    __expose();\n    var props = __props;\n    var emit = __emit;\n    var router = useRouter();\n    var hasError = ref(false);\n    var errorMessage = ref('');\n    onErrorCaptured(function (error, instance, info) {\n      console.error('页面错误:', error, info);\n      hasError.value = true;\n      errorMessage.value = error.message || props.fallback;\n      emit('error', {\n        error: error,\n        instance: instance,\n        info: info\n      });\n\n      // 阻止错误继续向上传播\n      return false;\n    });\n    var resetError = function resetError() {\n      hasError.value = false;\n      errorMessage.value = '';\n      emit('reset');\n    };\n    var goHome = function goHome() {\n      router.push('/');\n    };\n    var __returned__ = {\n      props: props,\n      emit: emit,\n      router: router,\n      hasError: hasError,\n      errorMessage: errorMessage,\n      resetError: resetError,\n      goHome: goHome,\n      ref: ref,\n      onErrorCaptured: onErrorCaptured,\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onErrorCaptured","useRouter","props","__props","emit","__emit","router","hasError","errorMessage","error","instance","info","console","value","message","fallback","resetError","goHome","push"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/components/ui/ErrorBoundary.vue"],"sourcesContent":["<template>\n  <div>\n    <slot v-if=\"!hasError\" />\n    <div v-else class=\"min-h-[400px] flex items-center justify-center\">\n      <div class=\"text-center p-8\">\n        <div class=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n          <font-awesome-icon :icon=\"['fas', 'exclamation-triangle']\" class=\"text-red-500 text-xl\" />\n        </div>\n        <h3 class=\"text-lg font-semibold text-gray-900 mb-2\">页面加载失败</h3>\n        <p class=\"text-gray-600 mb-4\">{{ errorMessage }}</p>\n        <div class=\"flex gap-3 justify-center\">\n          <button\n            @click=\"resetError\"\n            class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors\"\n          >\n            重试\n          </button>\n          <button\n            @click=\"goHome\"\n            class=\"border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors\"\n          >\n            返回首页\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onErrorCaptured } from 'vue';\nimport { useRouter } from 'vue-router';\n\nconst props = defineProps({\n  fallback: {\n    type: String,\n    default: '页面加载失败，请稍后重试'\n  }\n});\n\nconst emit = defineEmits(['error', 'reset']);\n\nconst router = useRouter();\nconst hasError = ref(false);\nconst errorMessage = ref('');\n\nonErrorCaptured((error, instance, info) => {\n  console.error('页面错误:', error, info);\n  hasError.value = true;\n  errorMessage.value = error.message || props.fallback;\n  emit('error', { error, instance, info });\n  \n  // 阻止错误继续向上传播\n  return false;\n});\n\nconst resetError = () => {\n  hasError.value = false;\n  errorMessage.value = '';\n  emit('reset');\n};\n\nconst goHome = () => {\n  router.push('/');\n};\n</script>"],"mappings":"AA8BA,SAASA,GAAG,EAAEC,eAAe,QAAQ,KAAK;AAC1C,SAASC,SAAS,QAAQ,YAAY;;;;;;;;;;;;;;IAEtC,IAAMC,KAAK,GAAGC,OAKZ;IAEF,IAAMC,IAAI,GAAGC,MAA+B;IAE5C,IAAMC,MAAM,GAAGL,SAAS,CAAC,CAAC;IAC1B,IAAMM,QAAQ,GAAGR,GAAG,CAAC,KAAK,CAAC;IAC3B,IAAMS,YAAY,GAAGT,GAAG,CAAC,EAAE,CAAC;IAE5BC,eAAe,CAAC,UAACS,KAAK,EAAEC,QAAQ,EAAEC,IAAI,EAAK;MACzCC,OAAO,CAACH,KAAK,CAAC,OAAO,EAAEA,KAAK,EAAEE,IAAI,CAAC;MACnCJ,QAAQ,CAACM,KAAK,GAAG,IAAI;MACrBL,YAAY,CAACK,KAAK,GAAGJ,KAAK,CAACK,OAAO,IAAIZ,KAAK,CAACa,QAAQ;MACpDX,IAAI,CAAC,OAAO,EAAE;QAAEK,KAAK,EAALA,KAAK;QAAEC,QAAQ,EAARA,QAAQ;QAAEC,IAAI,EAAJA;MAAK,CAAC,CAAC;;MAExC;MACA,OAAO,KAAK;IACd,CAAC,CAAC;IAEF,IAAMK,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;MACvBT,QAAQ,CAACM,KAAK,GAAG,KAAK;MACtBL,YAAY,CAACK,KAAK,GAAG,EAAE;MACvBT,IAAI,CAAC,OAAO,CAAC;IACf,CAAC;IAED,IAAMa,MAAM,GAAG,SAATA,MAAMA,CAAA,EAAS;MACnBX,MAAM,CAACY,IAAI,CAAC,GAAG,CAAC;IAClB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}