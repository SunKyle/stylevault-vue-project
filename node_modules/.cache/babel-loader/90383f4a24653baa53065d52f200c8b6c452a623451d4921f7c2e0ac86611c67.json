{"ast":null,"code":"import { ref } from 'vue';\n\n// 拖拽状态\n\nexport default {\n  __name: 'ClothingSelectionPanel',\n  props: {\n    categories: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    tags: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    activeCategory: {\n      type: String,\n      \"default\": '全部'\n    },\n    activeTag: {\n      type: String,\n      \"default\": ''\n    },\n    clothes: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    filteredClothes: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    selectedClothes: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    }\n  },\n  emits: ['category-change', 'tag-change', 'toggle-cloth', 'reset-filters'],\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var draggedItem = ref(null);\n\n    // 处理拖拽开始\n    function handleDragStart(event, item) {\n      // 设置拖拽数据\n      event.dataTransfer.setData('text/plain', JSON.stringify(item));\n      draggedItem.value = item;\n\n      // 设置拖拽效果\n      event.dataTransfer.effectAllowed = 'copy';\n\n      // 设置拖拽图像\n      var dragIcon = document.createElement('div');\n      dragIcon.className = 'drag-icon';\n      dragIcon.innerHTML = \"<img src=\\\"\".concat(item.img, \"\\\" class=\\\"w-16 h-16 object-cover rounded-lg shadow-lg\\\" />\");\n      document.body.appendChild(dragIcon);\n      event.dataTransfer.setDragImage(dragIcon, 40, 40);\n\n      // 添加拖拽样式\n      event.target.classList.add('dragging');\n\n      // 延迟移除拖拽图像\n      setTimeout(function () {\n        document.body.removeChild(dragIcon);\n      }, 0);\n    }\n\n    // 处理拖拽结束\n    function handleDragEnd(event) {\n      // 移除拖拽样式\n      event.target.classList.remove('dragging');\n      draggedItem.value = null;\n    }\n    var __returned__ = {\n      draggedItem: draggedItem,\n      handleDragStart: handleDragStart,\n      handleDragEnd: handleDragEnd,\n      ref: ref\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","draggedItem","handleDragStart","event","item","dataTransfer","setData","JSON","stringify","value","effectAllowed","dragIcon","document","createElement","className","innerHTML","concat","img","body","appendChild","setDragImage","target","classList","add","setTimeout","removeChild","handleDragEnd","remove"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/components/features/inspiration/ClothingSelectionPanel.vue"],"sourcesContent":["<template>\n  <div class=\"bg-gradient-to-br from-indigo-50 via-white to-purple-50 rounded-2xl shadow-lg overflow-hidden border border-indigo-100 transform transition-all duration-300 hover:shadow-xl hover:shadow-indigo-100\">\n    <div class=\"bg-gradient-to-r from-indigo-500/10 to-purple-500/10 p-5 border-b border-indigo-100 backdrop-blur-sm\">\n      <h3 class=\"font-bold text-lg flex items-center text-indigo-900\">\n        <div class=\"w-8 h-8 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center mr-2 shadow-sm animate-pulse-slow\">\n          <font-awesome-icon :icon=\"['fas', 'shirt']\" class=\"text-white text-sm\" />\n        </div>\n        选择衣物\n      </h3>\n    </div>\n\n    <div class=\"p-5\">\n      <!-- 过滤工具栏 -->\n      <div class=\"bg-gradient-to-br from-indigo-50/50 via-white to-purple-50/50 rounded-2xl p-5 mb-6 border border-indigo-100 shadow-sm backdrop-blur-sm\">\n        <!-- 分类选项卡 -->\n        <div class=\"mb-4\">\n          <h4 class=\"text-xs font-medium text-indigo-700 mb-3 uppercase tracking-wider\">衣物分类</h4>\n          <div class=\"flex overflow-x-auto pb-1 scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent -mx-1 px-1\">\n            <button v-for=\"cat in categories\" :key=\"cat\" class=\"px-4 py-2.5 font-medium whitespace-nowrap text-sm rounded-xl mx-1 transition-all duration-300\"\n                    :class=\"activeCategory === cat ? 'bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-sm' : 'bg-white text-indigo-700 hover:bg-indigo-100 hover:text-indigo-900'\"\n                    @click=\"$emit('category-change', cat)\">\n              {{ cat }}\n            </button>\n          </div>\n        </div>\n\n        <!-- 标签过滤 -->\n        <div>\n          <h4 class=\"text-xs font-medium text-indigo-700 mb-3 uppercase tracking-wider\">标签筛选</h4>\n          <div class=\"flex flex-wrap gap-2 -mx-1 px-1\">\n            <button v-for=\"tag in tags\" :key=\"tag\"\n                    class=\"text-xs px-3 py-2 rounded-full hover:bg-indigo-500 hover:text-white transition-all duration-300 shadow-sm\"\n                    :class=\"activeTag === tag ? 'bg-gradient-to-r from-indigo-500 to-purple-500 text-white' : 'bg-white text-indigo-700 border border-indigo-200'\"\n                    @click=\"$emit('tag-change', tag)\">\n              {{ tag }}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- 衣物列表 -->\n      <div class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5 max-h-[600px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent padding-top= 10px\">\n        <transition-group name=\"fade\" tag=\"div\" class=\"contents\">\n          <div v-for=\"item in filteredClothes\" :key=\"item.name\" class=\"group relative\">\n            <div class=\"aspect-[3/4] bg-white/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 border-2 cursor-pointer relative transform hover:-translate-y-2 draggable-item\"\n                 :class=\"selectedClothes.some(i => i.name === item.name) ? 'border-indigo-500 ring-2 ring-indigo-300/50' : 'border-indigo-100 hover:border-indigo-300'\"\n                 @click=\"$emit('toggle-cloth', item)\"\n                 draggable=\"true\"\n                 @dragstart=\"handleDragStart($event, item)\"\n                 @dragend=\"handleDragEnd\">\n              <div class=\"w-full h-full overflow-hidden\">\n                <img :src=\"item.img\" :alt=\"item.name\" class=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\" loading=\"lazy\" />\n              </div>\n              <!-- 选中状态遮罩 -->\n              <div v-if=\"selectedClothes.some(i => i.name === item.name)\" class=\"absolute inset-0 bg-gradient-to-br from-indigo-400/30 to-purple-400/30\"></div>\n              <!-- 悬停效果遮罩 -->\n              <div class=\"absolute inset-0 bg-gradient-to-t from-black/0 to-black/30 opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n              <!-- 选中状态指示器 -->\n              <div v-if=\"selectedClothes.some(i => i.name === item.name)\" class=\"absolute top-3 right-3 w-10 h-10 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center text-white shadow-lg transform transition-transform duration-300\">\n                <font-awesome-icon :icon=\"['fas', 'check']\" class=\"text-white\" />\n              </div>\n              <!-- 未选中状态指示器 -->\n              <div v-else class=\"absolute top-3 right-3 w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center shadow-md transform transition-transform duration-300 group-hover:scale-110 group-hover:bg-white\">\n                <font-awesome-icon :icon=\"['fas', 'plus']\" class=\"text-indigo-500\" />\n              </div>\n              <!-- 拖拽指示器 -->\n              <div class=\"absolute top-3 left-3 w-8 h-8 rounded-full bg-white/80 backdrop-blur-sm flex items-center justify-center shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                <font-awesome-icon :icon=\"['fas', 'grip-vertical']\" class=\"text-indigo-500 text-sm\" />\n              </div>\n              <!-- 衣物信息 -->\n              <div class=\"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/80 to-transparent\">\n                <p class=\"text-white text-sm font-semibold truncate\">{{ item.name }}</p>\n                <p class=\"text-white/90 text-xs truncate\">{{ item.type }}</p>\n              </div>\n            </div>\n            <div class=\"mt-3 px-1\">\n              <p class=\"text-sm font-semibold truncate group-hover:text-indigo-600 transition-colors\">{{ item.name }}</p>\n              <p class=\"text-xs text-indigo-500 truncate\">{{ item.type }}</p>\n            </div>\n          </div>\n        </transition-group>\n\n        <!-- 空状态提示 -->\n        <div v-if=\"filteredClothes.length === 0\" class=\"col-span-full text-center py-12\">\n          <div class=\"w-24 h-24 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center mx-auto mb-5 shadow-inner animate-pulse-slow\">\n            <font-awesome-icon :icon=\"['fas', 'search']\" class=\"text-indigo-500 text-2xl\" />\n          </div>\n          <p class=\"text-indigo-700 font-medium mb-4\">没有找到符合条件的衣物</p>\n          <button class=\"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white font-medium py-2.5 px-5 rounded-full transition-all duration-300 shadow-md hover:shadow-lg inline-flex items-center\" @click=\"$emit('reset-filters')\">\n            <font-awesome-icon :icon=\"['fas', 'sync-alt']\" class=\"mr-2\" />\n            查看全部衣物\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\n\n// 拖拽状态\nconst draggedItem = ref(null)\n\n// 处理拖拽开始\nfunction handleDragStart(event, item) {\n  // 设置拖拽数据\n  event.dataTransfer.setData('text/plain', JSON.stringify(item))\n  draggedItem.value = item\n\n  // 设置拖拽效果\n  event.dataTransfer.effectAllowed = 'copy'\n\n  // 设置拖拽图像\n  const dragIcon = document.createElement('div')\n  dragIcon.className = 'drag-icon'\n  dragIcon.innerHTML = `<img src=\"${item.img}\" class=\"w-16 h-16 object-cover rounded-lg shadow-lg\" />`\n  document.body.appendChild(dragIcon)\n  event.dataTransfer.setDragImage(dragIcon, 40, 40)\n\n  // 添加拖拽样式\n  event.target.classList.add('dragging')\n\n  // 延迟移除拖拽图像\n  setTimeout(() => {\n    document.body.removeChild(dragIcon)\n  }, 0)\n}\n\n// 处理拖拽结束\nfunction handleDragEnd(event) {\n  // 移除拖拽样式\n  event.target.classList.remove('dragging')\n  draggedItem.value = null\n}\n\ndefineEmits([\n  'category-change',\n  'tag-change',\n  'toggle-cloth',\n  'reset-filters'\n])\n\ndefineProps({\n  categories: {\n    type: Array,\n    default: () => []\n  },\n  tags: {\n    type: Array,\n    default: () => []\n  },\n  activeCategory: {\n    type: String,\n    default: '全部'\n  },\n  activeTag: {\n    type: String,\n    default: ''\n  },\n  clothes: {\n    type: Array,\n    default: () => []\n  },\n  filteredClothes: {\n    type: Array,\n    default: () => []\n  },\n  selectedClothes: {\n    type: Array,\n    default: () => []\n  }\n})\n</script>\n\n<style scoped>\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.3s ease, transform 0.3s ease;\n}\n\n.fade-enter-from, .fade-leave-to {\n  opacity: 0;\n  transform: scale(0.95);\n}\n\n/* 自定义滚动条样式 */\n.scrollbar-thin::-webkit-scrollbar {\n  width: 4px;\n}\n\n.scrollbar-thin::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.scrollbar-thin::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n}\n\n.scrollbar-thin::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.2);\n}\n\n/* 拖拽样式 */\n.draggable-item {\n  position: relative;\n}\n\n.draggable-item.dragging {\n  opacity: 0.5;\n  transform: scale(0.95);\n  cursor: grabbing;\n}\n\n.draggable-item:hover .drag-indicator {\n  opacity: 1;\n}\n\n.drag-indicator {\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n/* 拖拽预览效果 */\n.draggable-item.drag-over {\n  border-color: #6366f1;\n  background-color: rgba(99, 102, 241, 0.05);\n}\n\n/* 拖拽图像样式 */\n.drag-icon {\n  position: absolute;\n  top: -1000px;\n  left: -1000px;\n  pointer-events: none;\n  z-index: 9999;\n}\n\n/* 拖放区域样式增强 */\n.outfit-preview-area {\n  transition: all 0.3s ease;\n}\n\n.outfit-preview-area.drag-over {\n  background-color: rgba(99, 102, 241, 0.1);\n  border: 2px dashed #6366f1;\n  border-radius: 1rem;\n  transform: scale(1.02);\n}\n</style>\n"],"mappings":"AAmGA,SAASA,GAAG,QAAQ,KAAI;;AAExB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IACA,IAAMC,WAAW,GAAGD,GAAG,CAAC,IAAI;;IAE5B;IACA,SAASE,eAAeA,CAACC,KAAK,EAAEC,IAAI,EAAE;MACpC;MACAD,KAAK,CAACE,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC;MAC7DH,WAAW,CAACQ,KAAK,GAAGL,IAAG;;MAEvB;MACAD,KAAK,CAACE,YAAY,CAACK,aAAa,GAAG,MAAK;;MAExC;MACA,IAAMC,QAAQ,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK;MAC7CF,QAAQ,CAACG,SAAS,GAAG,WAAU;MAC/BH,QAAQ,CAACI,SAAS,iBAAAC,MAAA,CAAgBZ,IAAI,CAACa,GAAG,gEAAyD;MACnGL,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACR,QAAQ;MAClCR,KAAK,CAACE,YAAY,CAACe,YAAY,CAACT,QAAQ,EAAE,EAAE,EAAE,EAAE;;MAEhD;MACAR,KAAK,CAACkB,MAAM,CAACC,SAAS,CAACC,GAAG,CAAC,UAAU;;MAErC;MACAC,UAAU,CAAC,YAAM;QACfZ,QAAQ,CAACM,IAAI,CAACO,WAAW,CAACd,QAAQ;MACpC,CAAC,EAAE,CAAC;IACN;;IAEA;IACA,SAASe,aAAaA,CAACvB,KAAK,EAAE;MAC5B;MACAA,KAAK,CAACkB,MAAM,CAACC,SAAS,CAACK,MAAM,CAAC,UAAU;MACxC1B,WAAW,CAACQ,KAAK,GAAG,IAAG;IACzB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}