{"ast":null,"code":"import { ref } from 'vue';\nimport { useOutfitCreator } from '@/services/outfitCreatorService';\nexport default {\n  __name: 'ClothingSelectionPanel',\n  props: {\n    categories: {\n      type: Array,\n      default: () => []\n    },\n    tags: {\n      type: Array,\n      default: () => []\n    },\n    activeCategory: {\n      type: String,\n      default: '全部'\n    },\n    activeTag: {\n      type: String,\n      default: ''\n    },\n    clothes: {\n      type: Array,\n      default: () => []\n    },\n    filteredClothes: {\n      type: Array,\n      default: () => []\n    },\n    selectedClothes: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const service = useOutfitCreator();\n\n    // 拖拽状态\n    const draggedItem = ref(null);\n\n    // 处理拖拽开始\n    function handleDragStart(event, item) {\n      // 设置拖拽数据\n      event.dataTransfer.setData('text/plain', JSON.stringify(item));\n      draggedItem.value = item;\n\n      // 设置拖拽效果\n      event.dataTransfer.effectAllowed = 'copy';\n\n      // 设置拖拽图像\n      const dragIcon = document.createElement('div');\n      dragIcon.className = 'drag-icon';\n      dragIcon.innerHTML = `<img src=\"${item.img}\" class=\"w-16 h-16 object-cover rounded-lg shadow-lg\" />`;\n      document.body.appendChild(dragIcon);\n      event.dataTransfer.setDragImage(dragIcon, 40, 40);\n\n      // 添加拖拽样式\n      event.target.classList.add('dragging');\n\n      // 延迟移除拖拽图像\n      setTimeout(() => {\n        document.body.removeChild(dragIcon);\n      }, 0);\n    }\n\n    // 处理拖拽结束\n    function handleDragEnd(event) {\n      // 移除拖拽样式\n      event.target.classList.remove('dragging');\n      draggedItem.value = null;\n    }\n    const __returned__ = {\n      service,\n      draggedItem,\n      handleDragStart,\n      handleDragEnd,\n      ref,\n      get useOutfitCreator() {\n        return useOutfitCreator;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useOutfitCreator","service","draggedItem","handleDragStart","event","item","dataTransfer","setData","JSON","stringify","value","effectAllowed","dragIcon","document","createElement","className","innerHTML","img","body","appendChild","setDragImage","target","classList","add","setTimeout","removeChild","handleDragEnd","remove"],"sources":["/Users/sunxiaokai/Desktop/stylevault-vue-project/src/components/inspiration/ClothingSelectionPanel.vue"],"sourcesContent":["<template>\n  <div\n    class=\"bg-gradient-to-br from-indigo-50 via-white to-purple-50 rounded-2xl shadow-lg overflow-hidden border border-indigo-100 transform transition-all duration-300 hover:shadow-xl hover:shadow-indigo-100\"\n  >\n    <div\n      class=\"bg-gradient-to-r from-indigo-500/10 to-purple-500/10 p-5 border-b border-indigo-100 backdrop-blur-sm\"\n    >\n      <h3 class=\"font-bold text-lg flex items-center text-indigo-900\">\n        <div\n          class=\"w-8 h-8 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center mr-2 shadow-sm animate-pulse-slow\"\n        >\n          <font-awesome-icon :icon=\"['fas', 'shirt']\" class=\"text-white text-sm\" />\n        </div>\n        选择衣物\n      </h3>\n    </div>\n\n    <div class=\"p-5\">\n      <!-- 过滤工具栏 -->\n      <div\n        class=\"bg-gradient-to-br from-indigo-50/50 via-white to-purple-50/50 rounded-2xl p-5 mb-6 border border-indigo-100 shadow-sm backdrop-blur-sm\"\n      >\n        <!-- 分类选项卡 -->\n        <div class=\"mb-4\">\n          <h4 class=\"text-xs font-medium text-indigo-700 mb-3 uppercase tracking-wider\">\n            衣物分类\n          </h4>\n          <div\n            class=\"flex overflow-x-auto pb-1 scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent -mx-1 px-1\"\n          >\n            <button\n              v-for=\"cat in categories\"\n              :key=\"cat\"\n              class=\"px-4 py-2.5 font-medium whitespace-nowrap text-sm rounded-xl mx-1 transition-all duration-300\"\n              :class=\"\n                activeCategory === cat\n                  ? 'bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-sm'\n                  : 'bg-white text-indigo-700 hover:bg-indigo-100 hover:text-indigo-900'\n              \"\n              @click=\"$emit('category-change', cat)\"\n            >\n              {{ cat }}\n            </button>\n          </div>\n        </div>\n\n        <!-- 标签过滤 -->\n        <div>\n          <h4 class=\"text-xs font-medium text-indigo-700 mb-3 uppercase tracking-wider\">\n            标签筛选\n          </h4>\n          <div class=\"flex flex-wrap gap-2 -mx-1 px-1\">\n            <button\n              v-for=\"tag in tags\"\n              :key=\"tag\"\n              class=\"text-xs px-3 py-2 rounded-full hover:bg-indigo-500 hover:text-white transition-all duration-300 shadow-sm\"\n              :class=\"\n                activeTag === tag\n                  ? 'bg-gradient-to-r from-indigo-500 to-purple-500 text-white'\n                  : 'bg-white text-indigo-700 border border-indigo-200'\n              \"\n              @click=\"$emit('tag-change', tag)\"\n            >\n              {{ tag }}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- 衣物列表 -->\n      <div\n        class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5 max-h-[600px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-indigo-200 scrollbar-track-transparent pt-2\"\n      >\n        <transition-group name=\"fade\" tag=\"div\" class=\"contents\">\n          <div v-for=\"item in filteredClothes\" :key=\"item.name\" class=\"group relative\">\n            <div\n              class=\"aspect-[3/4] bg-white/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 border-2 cursor-pointer relative transform hover:-translate-y-2 draggable-item\"\n              :class=\"\n                selectedClothes.some(i => i.name === item.name)\n                  ? 'border-indigo-500 ring-2 ring-indigo-300/50'\n                  : 'border-indigo-100 hover:border-indigo-300'\n              \"\n              @click=\"$emit('toggle-cloth', item)\"\n              draggable=\"true\"\n              @dragstart=\"handleDragStart($event, item)\"\n              @dragend=\"handleDragEnd\"\n            >\n              <div class=\"w-full h-full overflow-hidden\">\n                <img\n                  :src=\"item.img\"\n                  :alt=\"item.name\"\n                  class=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\"\n                  loading=\"lazy\"\n                />\n              </div>\n              <!-- 选中状态遮罩 -->\n              <div\n                v-if=\"selectedClothes.some(i => i.name === item.name)\"\n                class=\"absolute inset-0 bg-gradient-to-br from-indigo-400/30 to-purple-400/30\"\n              ></div>\n              <!-- 悬停效果遮罩 -->\n              <div\n                class=\"absolute inset-0 bg-gradient-to-t from-black/0 to-black/30 opacity-0 group-hover:opacity-100 transition-opacity duration-300\"\n              ></div>\n              <!-- 选中状态指示器 -->\n              <div\n                v-if=\"selectedClothes.some(i => i.name === item.name)\"\n                class=\"absolute top-3 right-3 w-10 h-10 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center text-white shadow-lg transform transition-transform duration-300\"\n              >\n                <font-awesome-icon :icon=\"['fas', 'check']\" class=\"text-white\" />\n              </div>\n              <!-- 未选中状态指示器 -->\n              <div\n                v-else\n                class=\"absolute top-3 right-3 w-10 h-10 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center shadow-md transform transition-transform duration-300 group-hover:scale-110 group-hover:bg-white\"\n              >\n                <font-awesome-icon :icon=\"['fas', 'plus']\" class=\"text-indigo-500\" />\n              </div>\n              <!-- 衣物信息 -->\n              <div\n                class=\"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/80 to-transparent\"\n              >\n                <p class=\"text-white text-sm font-semibold truncate\">{{ item.name }}</p>\n                <p class=\"text-white/90 text-xs truncate\">{{ item.type }}</p>\n              </div>\n            </div>\n            <div class=\"mt-3 px-1\">\n              <p\n                class=\"text-sm font-semibold truncate group-hover:text-indigo-600 transition-colors\"\n              >\n                {{ item.name }}\n              </p>\n              <p class=\"text-xs text-indigo-500 truncate\">{{ item.type }}</p>\n            </div>\n          </div>\n        </transition-group>\n\n        <!-- 空状态提示 -->\n        <div v-if=\"filteredClothes.length === 0\" class=\"col-span-full text-center py-12\">\n          <div\n            class=\"w-24 h-24 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center mx-auto mb-5 shadow-inner animate-pulse-slow\"\n          >\n            <font-awesome-icon :icon=\"['fas', 'search']\" class=\"text-indigo-500 text-2xl\" />\n          </div>\n          <p class=\"text-indigo-700 font-medium mb-4\">没有找到符合条件的衣物</p>\n          <button\n            class=\"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white font-medium py-2.5 px-5 rounded-full transition-all duration-300 shadow-md hover:shadow-lg inline-flex items-center\"\n            @click=\"$emit('reset-filters')\"\n          >\n            <font-awesome-icon :icon=\"['fas', 'sync-alt']\" class=\"mr-2\" />\n            查看全部衣物\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\n  import { ref } from 'vue';\n  import { useOutfitCreator } from '@/services/outfitCreatorService';\n\n  const service = useOutfitCreator();\n\n  // 拖拽状态\n  const draggedItem = ref(null);\n\n  // 处理拖拽开始\n  function handleDragStart(event, item) {\n    // 设置拖拽数据\n    event.dataTransfer.setData('text/plain', JSON.stringify(item));\n    draggedItem.value = item;\n\n    // 设置拖拽效果\n    event.dataTransfer.effectAllowed = 'copy';\n\n    // 设置拖拽图像\n    const dragIcon = document.createElement('div');\n    dragIcon.className = 'drag-icon';\n    dragIcon.innerHTML = `<img src=\"${item.img}\" class=\"w-16 h-16 object-cover rounded-lg shadow-lg\" />`;\n    document.body.appendChild(dragIcon);\n    event.dataTransfer.setDragImage(dragIcon, 40, 40);\n\n    // 添加拖拽样式\n    event.target.classList.add('dragging');\n\n    // 延迟移除拖拽图像\n    setTimeout(() => {\n      document.body.removeChild(dragIcon);\n    }, 0);\n  }\n\n  // 处理拖拽结束\n  function handleDragEnd(event) {\n    // 移除拖拽样式\n    event.target.classList.remove('dragging');\n    draggedItem.value = null;\n  }\n\n  defineProps({\n    categories: {\n      type: Array,\n      default: () => [],\n    },\n    tags: {\n      type: Array,\n      default: () => [],\n    },\n    activeCategory: {\n      type: String,\n      default: '全部',\n    },\n    activeTag: {\n      type: String,\n      default: '',\n    },\n    clothes: {\n      type: Array,\n      default: () => [],\n    },\n    filteredClothes: {\n      type: Array,\n      default: () => [],\n    },\n    selectedClothes: {\n      type: Array,\n      default: () => [],\n    },\n  });\n</script>\n\n<style scoped>\n  .fade-enter-active,\n  .fade-leave-active {\n    transition: opacity 0.3s ease, transform 0.3s ease;\n  }\n\n  .fade-enter-from,\n  .fade-leave-to {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n\n  /* 自定义滚动条样式 */\n  .scrollbar-thin::-webkit-scrollbar {\n    width: 4px;\n  }\n\n  .scrollbar-thin::-webkit-scrollbar-track {\n    background: transparent;\n  }\n\n  .scrollbar-thin::-webkit-scrollbar-thumb {\n    background: rgba(0, 0, 0, 0.1);\n    border-radius: 2px;\n  }\n\n  .scrollbar-thin::-webkit-scrollbar-thumb:hover {\n    background: rgba(0, 0, 0, 0.2);\n  }\n\n  /* 拖拽样式 */\n  .draggable-item {\n    position: relative;\n  }\n\n  .draggable-item.dragging {\n    opacity: 0.5;\n    transform: scale(0.95);\n    cursor: grabbing;\n  }\n\n  .draggable-item:hover .drag-indicator {\n    opacity: 1;\n  }\n\n  .drag-indicator {\n    opacity: 0;\n    transition: opacity 0.3s ease;\n  }\n\n  /* 拖拽预览效果 */\n  .draggable-item.drag-over {\n    border-color: #6366f1;\n    background-color: rgba(99, 102, 241, 0.05);\n  }\n\n  /* 拖拽图像样式 */\n  .drag-icon {\n    position: absolute;\n    top: -1000px;\n    left: -1000px;\n    pointer-events: none;\n    z-index: 9999;\n  }\n\n  /* 拖放区域样式增强 */\n  .outfit-preview-area {\n    transition: all 0.3s ease;\n  }\n\n  .outfit-preview-area.drag-over {\n    background-color: rgba(99, 102, 241, 0.1);\n    border: 2px dashed #6366f1;\n    border-radius: 1rem;\n    transform: scale(1.02);\n  }\n</style>\n"],"mappings":"AA+JE,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,gBAAgB,QAAQ,iCAAiC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAElE,MAAMC,OAAO,GAAGD,gBAAgB,CAAC,CAAC;;IAElC;IACA,MAAME,WAAW,GAAGH,GAAG,CAAC,IAAI,CAAC;;IAE7B;IACA,SAASI,eAAeA,CAACC,KAAK,EAAEC,IAAI,EAAE;MACpC;MACAD,KAAK,CAACE,YAAY,CAACC,OAAO,CAAC,YAAY,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,CAAC;MAC9DH,WAAW,CAACQ,KAAK,GAAGL,IAAI;;MAExB;MACAD,KAAK,CAACE,YAAY,CAACK,aAAa,GAAG,MAAM;;MAEzC;MACA,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;MAC9CF,QAAQ,CAACG,SAAS,GAAG,WAAW;MAChCH,QAAQ,CAACI,SAAS,GAAG,aAAaX,IAAI,CAACY,GAAG,0DAA0D;MACpGJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACP,QAAQ,CAAC;MACnCR,KAAK,CAACE,YAAY,CAACc,YAAY,CAACR,QAAQ,EAAE,EAAE,EAAE,EAAE,CAAC;;MAEjD;MACAR,KAAK,CAACiB,MAAM,CAACC,SAAS,CAACC,GAAG,CAAC,UAAU,CAAC;;MAEtC;MACAC,UAAU,CAAC,MAAM;QACfX,QAAQ,CAACK,IAAI,CAACO,WAAW,CAACb,QAAQ,CAAC;MACrC,CAAC,EAAE,CAAC,CAAC;IACP;;IAEA;IACA,SAASc,aAAaA,CAACtB,KAAK,EAAE;MAC5B;MACAA,KAAK,CAACiB,MAAM,CAACC,SAAS,CAACK,MAAM,CAAC,UAAU,CAAC;MACzCzB,WAAW,CAACQ,KAAK,GAAG,IAAI;IAC1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}